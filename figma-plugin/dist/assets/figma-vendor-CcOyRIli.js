import{r as Ke,R as Et,a as Ka}from"./react-vendor-CCYt3bkQ.js";function Ha(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function Ga(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zt(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}function $i(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=$i(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Ja(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=$i(t))&&(n&&(n+=" "),n+=e);return n}const ds=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,fs=Ja,Om=(t,e)=>r=>{var n;if(e?.variants==null)return fs(t,r?.class,r?.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(l=>{const u=r?.[l],h=i?.[l];if(u===null)return null;const d=ds(u)||ds(h);return s[l][d]}),a=r&&Object.entries(r).reduce((l,u)=>{let[h,d]=u;return d===void 0||(l[h]=d),l},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((l,u)=>{let{class:h,className:d,...f}=u;return Object.entries(f).every(p=>{let[g,m]=p;return Array.isArray(m)?m.includes({...i,...a}[g]):{...i,...a}[g]===m})?[...l,h,d]:l},[]);return fs(t,o,c,r?.class,r?.className)},Qa=(t,e)=>{const r=new Array(t.length+e.length);for(let n=0;n<t.length;n++)r[n]=t[n];for(let n=0;n<e.length;n++)r[t.length+n]=e[n];return r},Ya=(t,e)=>({classGroupId:t,validator:e}),Ii=(t=new Map,e=null,r)=>({nextPart:t,validators:e,classGroupId:r}),gr="-",ps=[],Xa="arbitrary..",ec=t=>{const e=rc(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return tc(o);const a=o.split(gr),c=a[0]===""&&a.length>1?1:0;return Di(a,c,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const c=n[o],l=r[o];return c?l?Qa(l,c):c:l||ps}return r[o]||ps}}},Di=(t,e,r)=>{if(t.length-e===0)return r.classGroupId;const s=t[e],i=r.nextPart.get(s);if(i){const l=Di(t,e+1,i);if(l)return l}const o=r.validators;if(o===null)return;const a=e===0?t.join(gr):t.slice(e).join(gr),c=o.length;for(let l=0;l<c;l++){const u=o[l];if(u.validator(a))return u.classGroupId}},tc=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),r=e.indexOf(":"),n=e.slice(0,r);return n?Xa+n:void 0})(),rc=t=>{const{theme:e,classGroups:r}=t;return nc(r,e)},nc=(t,e)=>{const r=Ii();for(const n in t){const s=t[n];Nn(s,r,n,e)}return r},Nn=(t,e,r,n)=>{const s=t.length;for(let i=0;i<s;i++){const o=t[i];sc(o,e,r,n)}},sc=(t,e,r,n)=>{if(typeof t=="string"){ic(t,e,r);return}if(typeof t=="function"){oc(t,e,r,n);return}ac(t,e,r,n)},ic=(t,e,r)=>{const n=t===""?e:Ui(e,t);n.classGroupId=r},oc=(t,e,r,n)=>{if(cc(t)){Nn(t(n),e,r,n);return}e.validators===null&&(e.validators=[]),e.validators.push(Ya(r,t))},ac=(t,e,r,n)=>{const s=Object.entries(t),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];Nn(c,Ui(e,a),r,n)}},Ui=(t,e)=>{let r=t;const n=e.split(gr),s=n.length;for(let i=0;i<s;i++){const o=n[i];let a=r.nextPart.get(o);a||(a=Ii(),r.nextPart.set(o,a)),r=a}return r},cc=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,lc=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=Object.create(null),n=Object.create(null);const s=(i,o)=>{r[i]=o,e++,e>t&&(e=0,n=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=n[i])!==void 0)return s(i,o),o},set(i,o){i in r?r[i]=o:s(i,o)}}},ln="!",gs=":",uc=[],ms=(t,e,r,n,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:r,maybePostfixModifierPosition:n,isExternal:s}),hc=t=>{const{prefix:e,experimentalParseClassName:r}=t;let n=s=>{const i=[];let o=0,a=0,c=0,l;const u=s.length;for(let g=0;g<u;g++){const m=s[g];if(o===0&&a===0){if(m===gs){i.push(s.slice(c,g)),c=g+1;continue}if(m==="/"){l=g;continue}}m==="["?o++:m==="]"?o--:m==="("?a++:m===")"&&a--}const h=i.length===0?s:s.slice(c);let d=h,f=!1;h.endsWith(ln)?(d=h.slice(0,-1),f=!0):h.startsWith(ln)&&(d=h.slice(1),f=!0);const p=l&&l>c?l-c:void 0;return ms(i,f,d,p)};if(e){const s=e+gs,i=n;n=o=>o.startsWith(s)?i(o.slice(s.length)):ms(uc,!1,o,void 0,!0)}if(r){const s=n;n=i=>r({className:i,parseClassName:s})}return n},dc=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((r,n)=>{e.set(r,1e6+n)}),r=>{const n=[];let s=[];for(let i=0;i<r.length;i++){const o=r[i],a=o[0]==="[",c=e.has(o);a||c?(s.length>0&&(s.sort(),n.push(...s),s=[]),n.push(o)):s.push(o)}return s.length>0&&(s.sort(),n.push(...s)),n}},fc=t=>({cache:lc(t.cacheSize),parseClassName:hc(t),sortModifiers:dc(t),...ec(t)}),pc=/\s+/,gc=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:i}=e,o=[],a=t.trim().split(pc);let c="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{isExternal:h,modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=r(u);if(h){c=u+(c.length>0?" "+c:c);continue}let m=!!g,v=n(m?p.substring(0,g):p);if(!v){if(!m){c=u+(c.length>0?" "+c:c);continue}if(v=n(p),!v){c=u+(c.length>0?" "+c:c);continue}m=!1}const b=d.length===0?"":d.length===1?d[0]:i(d).join(":"),y=f?b+ln:b,_=y+v;if(o.indexOf(_)>-1)continue;o.push(_);const k=s(v,m);for(let R=0;R<k.length;++R){const j=k[R];o.push(y+j)}c=u+(c.length>0?" "+c:c)}return c},mc=(...t)=>{let e=0,r,n,s="";for(;e<t.length;)(r=t[e++])&&(n=zi(r))&&(s&&(s+=" "),s+=n);return s},zi=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=zi(t[n]))&&(r&&(r+=" "),r+=e);return r},vc=(t,...e)=>{let r,n,s,i;const o=c=>{const l=e.reduce((u,h)=>h(u),t());return r=fc(l),n=r.cache.get,s=r.cache.set,i=a,a(c)},a=c=>{const l=n(c);if(l)return l;const u=gc(c,r);return s(c,u),u};return i=o,(...c)=>i(mc(...c))},yc=[],Z=t=>{const e=r=>r[t]||yc;return e.isThemeGetter=!0,e},Ni=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Li=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bc=/^\d+\/\d+$/,wc=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_c=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kc=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ec=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Sc=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,et=t=>bc.test(t),$=t=>!!t&&!Number.isNaN(Number(t)),je=t=>!!t&&Number.isInteger(Number(t)),Kr=t=>t.endsWith("%")&&$(t.slice(0,-1)),Ae=t=>wc.test(t),Oc=()=>!0,Ac=t=>_c.test(t)&&!kc.test(t),Fi=()=>!1,Tc=t=>Ec.test(t),xc=t=>Sc.test(t),Rc=t=>!S(t)&&!O(t),Pc=t=>vt(t,qi,Fi),S=t=>Ni.test(t),Ne=t=>vt(t,Vi,Ac),Hr=t=>vt(t,Dc,$),vs=t=>vt(t,Mi,Fi),Cc=t=>vt(t,Bi,xc),Wt=t=>vt(t,Zi,Tc),O=t=>Li.test(t),St=t=>yt(t,Vi),jc=t=>yt(t,Uc),ys=t=>yt(t,Mi),$c=t=>yt(t,qi),Ic=t=>yt(t,Bi),Kt=t=>yt(t,Zi,!0),vt=(t,e,r)=>{const n=Ni.exec(t);return n?n[1]?e(n[1]):r(n[2]):!1},yt=(t,e,r=!1)=>{const n=Li.exec(t);return n?n[1]?e(n[1]):r:!1},Mi=t=>t==="position"||t==="percentage",Bi=t=>t==="image"||t==="url",qi=t=>t==="length"||t==="size"||t==="bg-size",Vi=t=>t==="length",Dc=t=>t==="number",Uc=t=>t==="family-name",Zi=t=>t==="shadow",zc=()=>{const t=Z("color"),e=Z("font"),r=Z("text"),n=Z("font-weight"),s=Z("tracking"),i=Z("leading"),o=Z("breakpoint"),a=Z("container"),c=Z("spacing"),l=Z("radius"),u=Z("shadow"),h=Z("inset-shadow"),d=Z("text-shadow"),f=Z("drop-shadow"),p=Z("blur"),g=Z("perspective"),m=Z("aspect"),v=Z("ease"),b=Z("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[..._(),O,S],R=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],A=()=>[O,S,c],I=()=>[et,"full","auto",...A()],Y=()=>[je,"none","subgrid",O,S],he=()=>["auto",{span:["full",je,O,S]},je,O,S],X=()=>[je,"auto",O,S],de=()=>["auto","min","max","fr",O,S],B=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...A()],V=()=>[et,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],x=()=>[t,O,S],fe=()=>[..._(),ys,vs,{position:[O,S]}],Mt=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ls=()=>["auto","cover","contain",$c,Pc,{size:[O,S]}],Zr=()=>[Kr,St,Ne],ee=()=>["","none","full",l,O,S],ie=()=>["",$,St,Ne],Bt=()=>["solid","dashed","dotted","double"],us=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>[$,Kr,ys,vs],hs=()=>["","none",p,O,S],qt=()=>["none",$,O,S],Vt=()=>["none",$,O,S],Wr=()=>[$,O,S],Zt=()=>[et,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ae],breakpoint:[Ae],color:[Oc],container:[Ae],"drop-shadow":[Ae],ease:["in","out","in-out"],font:[Rc],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ae],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ae],shadow:[Ae],spacing:["px",$],text:[Ae],"text-shadow":[Ae],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",et,S,O,m]}],container:["container"],columns:[{columns:[$,S,O,a]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[je,"auto",O,S]}],basis:[{basis:[et,"full","auto",a,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$,et,"auto","initial","none",S]}],grow:[{grow:["",$,O,S]}],shrink:[{shrink:["",$,O,S]}],order:[{order:[je,"first","last","none",O,S]}],"grid-cols":[{"grid-cols":Y()}],"col-start-end":[{col:he()}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":Y()}],"row-start-end":[{row:he()}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":de()}],"auto-rows":[{"auto-rows":de()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...B(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...B()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":B()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[a,"screen",...V()]}],"min-w":[{"min-w":[a,"screen","none",...V()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...V()]}],h:[{h:["screen","lh",...V()]}],"min-h":[{"min-h":["screen","lh","none",...V()]}],"max-h":[{"max-h":["screen","lh",...V()]}],"font-size":[{text:["base",r,St,Ne]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,O,Hr]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Kr,S]}],"font-family":[{font:[jc,S,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,O,S]}],"line-clamp":[{"line-clamp":[$,"none",O,Hr]}],leading:[{leading:[i,...A()]}],"list-image":[{"list-image":["none",O,S]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",O,S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:x()}],"text-color":[{text:x()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Bt(),"wavy"]}],"text-decoration-thickness":[{decoration:[$,"from-font","auto",O,Ne]}],"text-decoration-color":[{decoration:x()}],"underline-offset":[{"underline-offset":[$,"auto",O,S]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",O,S]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",O,S]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:fe()}],"bg-repeat":[{bg:Mt()}],"bg-size":[{bg:ls()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},je,O,S],radial:["",O,S],conic:[je,O,S]},Ic,Cc]}],"bg-color":[{bg:x()}],"gradient-from-pos":[{from:Zr()}],"gradient-via-pos":[{via:Zr()}],"gradient-to-pos":[{to:Zr()}],"gradient-from":[{from:x()}],"gradient-via":[{via:x()}],"gradient-to":[{to:x()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:ie()}],"border-w-x":[{"border-x":ie()}],"border-w-y":[{"border-y":ie()}],"border-w-s":[{"border-s":ie()}],"border-w-e":[{"border-e":ie()}],"border-w-t":[{"border-t":ie()}],"border-w-r":[{"border-r":ie()}],"border-w-b":[{"border-b":ie()}],"border-w-l":[{"border-l":ie()}],"divide-x":[{"divide-x":ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Bt(),"hidden","none"]}],"divide-style":[{divide:[...Bt(),"hidden","none"]}],"border-color":[{border:x()}],"border-color-x":[{"border-x":x()}],"border-color-y":[{"border-y":x()}],"border-color-s":[{"border-s":x()}],"border-color-e":[{"border-e":x()}],"border-color-t":[{"border-t":x()}],"border-color-r":[{"border-r":x()}],"border-color-b":[{"border-b":x()}],"border-color-l":[{"border-l":x()}],"divide-color":[{divide:x()}],"outline-style":[{outline:[...Bt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[$,O,S]}],"outline-w":[{outline:["",$,St,Ne]}],"outline-color":[{outline:x()}],shadow:[{shadow:["","none",u,Kt,Wt]}],"shadow-color":[{shadow:x()}],"inset-shadow":[{"inset-shadow":["none",h,Kt,Wt]}],"inset-shadow-color":[{"inset-shadow":x()}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:x()}],"ring-offset-w":[{"ring-offset":[$,Ne]}],"ring-offset-color":[{"ring-offset":x()}],"inset-ring-w":[{"inset-ring":ie()}],"inset-ring-color":[{"inset-ring":x()}],"text-shadow":[{"text-shadow":["none",d,Kt,Wt]}],"text-shadow-color":[{"text-shadow":x()}],opacity:[{opacity:[$,O,S]}],"mix-blend":[{"mix-blend":[...us(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":us()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$]}],"mask-image-linear-from-pos":[{"mask-linear-from":K()}],"mask-image-linear-to-pos":[{"mask-linear-to":K()}],"mask-image-linear-from-color":[{"mask-linear-from":x()}],"mask-image-linear-to-color":[{"mask-linear-to":x()}],"mask-image-t-from-pos":[{"mask-t-from":K()}],"mask-image-t-to-pos":[{"mask-t-to":K()}],"mask-image-t-from-color":[{"mask-t-from":x()}],"mask-image-t-to-color":[{"mask-t-to":x()}],"mask-image-r-from-pos":[{"mask-r-from":K()}],"mask-image-r-to-pos":[{"mask-r-to":K()}],"mask-image-r-from-color":[{"mask-r-from":x()}],"mask-image-r-to-color":[{"mask-r-to":x()}],"mask-image-b-from-pos":[{"mask-b-from":K()}],"mask-image-b-to-pos":[{"mask-b-to":K()}],"mask-image-b-from-color":[{"mask-b-from":x()}],"mask-image-b-to-color":[{"mask-b-to":x()}],"mask-image-l-from-pos":[{"mask-l-from":K()}],"mask-image-l-to-pos":[{"mask-l-to":K()}],"mask-image-l-from-color":[{"mask-l-from":x()}],"mask-image-l-to-color":[{"mask-l-to":x()}],"mask-image-x-from-pos":[{"mask-x-from":K()}],"mask-image-x-to-pos":[{"mask-x-to":K()}],"mask-image-x-from-color":[{"mask-x-from":x()}],"mask-image-x-to-color":[{"mask-x-to":x()}],"mask-image-y-from-pos":[{"mask-y-from":K()}],"mask-image-y-to-pos":[{"mask-y-to":K()}],"mask-image-y-from-color":[{"mask-y-from":x()}],"mask-image-y-to-color":[{"mask-y-to":x()}],"mask-image-radial":[{"mask-radial":[O,S]}],"mask-image-radial-from-pos":[{"mask-radial-from":K()}],"mask-image-radial-to-pos":[{"mask-radial-to":K()}],"mask-image-radial-from-color":[{"mask-radial-from":x()}],"mask-image-radial-to-color":[{"mask-radial-to":x()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[$]}],"mask-image-conic-from-pos":[{"mask-conic-from":K()}],"mask-image-conic-to-pos":[{"mask-conic-to":K()}],"mask-image-conic-from-color":[{"mask-conic-from":x()}],"mask-image-conic-to-color":[{"mask-conic-to":x()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:fe()}],"mask-repeat":[{mask:Mt()}],"mask-size":[{mask:ls()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",O,S]}],filter:[{filter:["","none",O,S]}],blur:[{blur:hs()}],brightness:[{brightness:[$,O,S]}],contrast:[{contrast:[$,O,S]}],"drop-shadow":[{"drop-shadow":["","none",f,Kt,Wt]}],"drop-shadow-color":[{"drop-shadow":x()}],grayscale:[{grayscale:["",$,O,S]}],"hue-rotate":[{"hue-rotate":[$,O,S]}],invert:[{invert:["",$,O,S]}],saturate:[{saturate:[$,O,S]}],sepia:[{sepia:["",$,O,S]}],"backdrop-filter":[{"backdrop-filter":["","none",O,S]}],"backdrop-blur":[{"backdrop-blur":hs()}],"backdrop-brightness":[{"backdrop-brightness":[$,O,S]}],"backdrop-contrast":[{"backdrop-contrast":[$,O,S]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$,O,S]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$,O,S]}],"backdrop-invert":[{"backdrop-invert":["",$,O,S]}],"backdrop-opacity":[{"backdrop-opacity":[$,O,S]}],"backdrop-saturate":[{"backdrop-saturate":[$,O,S]}],"backdrop-sepia":[{"backdrop-sepia":["",$,O,S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",O,S]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$,"initial",O,S]}],ease:[{ease:["linear","initial",v,O,S]}],delay:[{delay:[$,O,S]}],animate:[{animate:["none",b,O,S]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,O,S]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:qt()}],"rotate-x":[{"rotate-x":qt()}],"rotate-y":[{"rotate-y":qt()}],"rotate-z":[{"rotate-z":qt()}],scale:[{scale:Vt()}],"scale-x":[{"scale-x":Vt()}],"scale-y":[{"scale-y":Vt()}],"scale-z":[{"scale-z":Vt()}],"scale-3d":["scale-3d"],skew:[{skew:Wr()}],"skew-x":[{"skew-x":Wr()}],"skew-y":[{"skew-y":Wr()}],transform:[{transform:[O,S,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Zt()}],"translate-x":[{"translate-x":Zt()}],"translate-y":[{"translate-y":Zt()}],"translate-z":[{"translate-z":Zt()}],"translate-none":["translate-none"],accent:[{accent:x()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:x()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",O,S]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",O,S]}],fill:[{fill:["none",...x()]}],"stroke-w":[{stroke:[$,St,Ne,Hr]}],stroke:[{stroke:["none",...x()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Am=vc(zc);var Nc=(t,e,r,n,s,i,o,a)=>{let c=document.documentElement,l=["light","dark"];function u(f){(Array.isArray(t)?t:[t]).forEach(p=>{let g=p==="class",m=g&&i?s.map(v=>i[v]||v):s;g?(c.classList.remove(...m),c.classList.add(i&&i[f]?i[f]:f)):c.setAttribute(p,f)}),h(f)}function h(f){a&&l.includes(f)&&(c.style.colorScheme=f)}function d(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)u(n);else try{let f=localStorage.getItem(e)||r,p=o&&f==="system"?d():f;u(p)}catch{}};Ke.createContext(void 0);Ke.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,themes:a,nonce:c,scriptProps:l})=>{let u=JSON.stringify([r,e,i,t,a,o,n,s]).slice(1,-1);return Ke.createElement("script",{...l,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${Nc.toString()})(${u})`}})});function Lc(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Array(12).fill(0);let un=1;class Fc{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;const{message:n,...s}=e,i=typeof e?.id=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:un++,o=this.toasts.find(c=>c.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:n}),{...c,...e,id:i,dismissible:a,title:n}):c):this.addToast({title:n,...s,dismissible:a,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:e,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let i=n!==void 0,o;const a=s.then(async l=>{if(o=["resolve",l],Et.isValidElement(l))i=!1,this.create({id:n,type:"default",message:l});else if(Bc(l)&&!l.ok){i=!1;const h=typeof r.error=="function"?await r.error(`HTTP error! status: ${l.status}`):r.error,d=typeof r.description=="function"?await r.description(`HTTP error! status: ${l.status}`):r.description,p=typeof h=="object"&&!Et.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:d,...p})}else if(l instanceof Error){i=!1;const h=typeof r.error=="function"?await r.error(l):r.error,d=typeof r.description=="function"?await r.description(l):r.description,p=typeof h=="object"&&!Et.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:d,...p})}else if(r.success!==void 0){i=!1;const h=typeof r.success=="function"?await r.success(l):r.success,d=typeof r.description=="function"?await r.description(l):r.description,p=typeof h=="object"&&!Et.isValidElement(h)?h:{message:h};this.create({id:n,type:"success",description:d,...p})}}).catch(async l=>{if(o=["reject",l],r.error!==void 0){i=!1;const u=typeof r.error=="function"?await r.error(l):r.error,h=typeof r.description=="function"?await r.description(l):r.description,f=typeof u=="object"&&!Et.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),c=()=>new Promise((l,u)=>a.then(()=>o[0]==="reject"?u(o[1]):l(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,r)=>{const n=r?.id||un++;return this.create({jsx:e(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const le=new Fc,Mc=(t,e)=>{const r=e?.id||un++;return le.addToast({title:t,...e,id:r}),r},Bc=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",qc=Mc,Vc=()=>le.toasts,Zc=()=>le.getActiveToasts();Object.assign(qc,{success:le.success,info:le.info,warning:le.warning,error:le.error,custom:le.custom,message:le.message,promise:le.promise,dismiss:le.dismiss,loading:le.loading},{getHistory:Vc,getToasts:Zc});Lc("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Tm(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t?.(s),r===!1||!s.defaultPrevented)return e?.(s)}}const Wc=["top","right","bottom","left"],De=Math.min,oe=Math.max,mr=Math.round,Ht=Math.floor,ke=t=>({x:t,y:t}),Kc={left:"right",right:"left",bottom:"top",top:"bottom"},Hc={start:"end",end:"start"};function hn(t,e,r){return oe(t,De(e,r))}function Re(t,e){return typeof t=="function"?t(e):t}function Pe(t){return t.split("-")[0]}function bt(t){return t.split("-")[1]}function Ln(t){return t==="x"?"y":"x"}function Fn(t){return t==="y"?"height":"width"}const Gc=new Set(["top","bottom"]);function _e(t){return Gc.has(Pe(t))?"y":"x"}function Mn(t){return Ln(_e(t))}function Jc(t,e,r){r===void 0&&(r=!1);const n=bt(t),s=Mn(t),i=Fn(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=vr(o)),[o,vr(o)]}function Qc(t){const e=vr(t);return[dn(t),e,dn(e)]}function dn(t){return t.replace(/start|end/g,e=>Hc[e])}const bs=["left","right"],ws=["right","left"],Yc=["top","bottom"],Xc=["bottom","top"];function el(t,e,r){switch(t){case"top":case"bottom":return r?e?ws:bs:e?bs:ws;case"left":case"right":return e?Yc:Xc;default:return[]}}function tl(t,e,r,n){const s=bt(t);let i=el(Pe(t),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(dn)))),i}function vr(t){return t.replace(/left|right|bottom|top/g,e=>Kc[e])}function rl(t){return{top:0,right:0,bottom:0,left:0,...t}}function Wi(t){return typeof t!="number"?rl(t):{top:t,right:t,bottom:t,left:t}}function yr(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function _s(t,e,r){let{reference:n,floating:s}=t;const i=_e(e),o=Mn(e),a=Fn(o),c=Pe(e),l=i==="y",u=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,d=n[a]/2-s[a]/2;let f;switch(c){case"top":f={x:u,y:n.y-s.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-s.width,y:h};break;default:f={x:n.x,y:n.y}}switch(bt(e)){case"start":f[o]-=d*(r&&l?-1:1);break;case"end":f[o]+=d*(r&&l?-1:1);break}return f}const nl=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:h}=_s(l,n,c),d=n,f={},p=0;for(let g=0;g<a.length;g++){const{name:m,fn:v}=a[g],{x:b,y,data:_,reset:k}=await v({x:u,y:h,initialPlacement:n,placement:d,strategy:s,middlewareData:f,rects:l,platform:o,elements:{reference:t,floating:e}});u=b??u,h=y??h,f={...f,[m]:{...f[m],..._}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(d=k.placement),k.rects&&(l=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x:u,y:h}=_s(l,d,c)),g=-1)}return{x:u,y:h,placement:d,strategy:s,middlewareData:f}};async function Rt(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=Re(e,t),p=Wi(f),m=a[d?h==="floating"?"reference":"floating":h],v=yr(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(m)))==null||r?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),b=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(y))?await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1}:{x:1,y:1},k=yr(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:y,strategy:c}):b);return{top:(v.top-k.top+p.top)/_.y,bottom:(k.bottom-v.bottom+p.bottom)/_.y,left:(v.left-k.left+p.left)/_.x,right:(k.right-v.right+p.right)/_.x}}const sl=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:l,padding:u=0}=Re(t,e)||{};if(l==null)return{};const h=Wi(u),d={x:r,y:n},f=Mn(s),p=Fn(f),g=await o.getDimensions(l),m=f==="y",v=m?"top":"left",b=m?"bottom":"right",y=m?"clientHeight":"clientWidth",_=i.reference[p]+i.reference[f]-d[f]-i.floating[p],k=d[f]-i.reference[f],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let j=R?R[y]:0;(!j||!await(o.isElement==null?void 0:o.isElement(R)))&&(j=a.floating[y]||i.floating[p]);const A=_/2-k/2,I=j/2-g[p]/2-1,Y=De(h[v],I),he=De(h[b],I),X=Y,de=j-g[p]-he,B=j/2-g[p]/2+A,re=hn(X,B,de),q=!c.arrow&&bt(s)!=null&&B!==re&&i.reference[p]/2-(B<X?Y:he)-g[p]/2<0,V=q?B<X?B-X:B-de:0;return{[f]:d[f]+V,data:{[f]:re,centerOffset:B-re-V,...q&&{alignmentOffset:V}},reset:q}}}),il=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...m}=Re(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const v=Pe(s),b=_e(a),y=Pe(a)===a,_=await(c.isRTL==null?void 0:c.isRTL(l.floating)),k=d||(y||!g?[vr(a)]:Qc(a)),R=p!=="none";!d&&R&&k.push(...tl(a,g,p,_));const j=[a,...k],A=await Rt(e,m),I=[];let Y=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&I.push(A[v]),h){const B=Jc(s,o,_);I.push(A[B[0]],A[B[1]])}if(Y=[...Y,{placement:s,overflows:I}],!I.every(B=>B<=0)){var he,X;const B=(((he=i.flip)==null?void 0:he.index)||0)+1,re=j[B];if(re&&(!(h==="alignment"?b!==_e(re):!1)||Y.every(x=>_e(x.placement)===b?x.overflows[0]>0:!0)))return{data:{index:B,overflows:Y},reset:{placement:re}};let q=(X=Y.filter(V=>V.overflows[0]<=0).sort((V,x)=>V.overflows[1]-x.overflows[1])[0])==null?void 0:X.placement;if(!q)switch(f){case"bestFit":{var de;const V=(de=Y.filter(x=>{if(R){const fe=_e(x.placement);return fe===b||fe==="y"}return!0}).map(x=>[x.placement,x.overflows.filter(fe=>fe>0).reduce((fe,Mt)=>fe+Mt,0)]).sort((x,fe)=>x[1]-fe[1])[0])==null?void 0:de[0];V&&(q=V);break}case"initialPlacement":q=a;break}if(s!==q)return{reset:{placement:q}}}return{}}}};function ks(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Es(t){return Wc.some(e=>t[e]>=0)}const ol=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=Re(t,e);switch(n){case"referenceHidden":{const i=await Rt(e,{...s,elementContext:"reference"}),o=ks(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Es(o)}}}case"escaped":{const i=await Rt(e,{...s,altBoundary:!0}),o=ks(i,r.floating);return{data:{escapedOffsets:o,escaped:Es(o)}}}default:return{}}}}},Ki=new Set(["left","top"]);async function al(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Pe(r),a=bt(r),c=_e(r)==="y",l=Ki.has(o)?-1:1,u=i&&c?-1:1,h=Re(e,t);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),c?{x:f*u,y:d*l}:{x:d*l,y:f*u}}const cl=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await al(e,t);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},ll=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:v,y:b}=m;return{x:v,y:b}}},...c}=Re(t,e),l={x:r,y:n},u=await Rt(e,c),h=_e(Pe(s)),d=Ln(h);let f=l[d],p=l[h];if(i){const m=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=f+u[m],y=f-u[v];f=hn(b,f,y)}if(o){const m=h==="y"?"top":"left",v=h==="y"?"bottom":"right",b=p+u[m],y=p-u[v];p=hn(b,p,y)}const g=a.fn({...e,[d]:f,[h]:p});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[d]:i,[h]:o}}}}}},ul=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=Re(t,e),u={x:r,y:n},h=_e(s),d=Ln(h);let f=u[d],p=u[h];const g=Re(a,e),m=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const y=d==="y"?"height":"width",_=i.reference[d]-i.floating[y]+m.mainAxis,k=i.reference[d]+i.reference[y]-m.mainAxis;f<_?f=_:f>k&&(f=k)}if(l){var v,b;const y=d==="y"?"width":"height",_=Ki.has(Pe(s)),k=i.reference[h]-i.floating[y]+(_&&((v=o.offset)==null?void 0:v[h])||0)+(_?0:m.crossAxis),R=i.reference[h]+i.reference[y]+(_?0:((b=o.offset)==null?void 0:b[h])||0)-(_?m.crossAxis:0);p<k?p=k:p>R&&(p=R)}return{[d]:f,[h]:p}}}},hl=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...l}=Re(t,e),u=await Rt(e,l),h=Pe(s),d=bt(s),f=_e(s)==="y",{width:p,height:g}=i.floating;let m,v;h==="top"||h==="bottom"?(m=h,v=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=h,m=d==="end"?"top":"bottom");const b=g-u.top-u.bottom,y=p-u.left-u.right,_=De(g-u[m],b),k=De(p-u[v],y),R=!e.middlewareData.shift;let j=_,A=k;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(A=y),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(j=b),R&&!d){const Y=oe(u.left,0),he=oe(u.right,0),X=oe(u.top,0),de=oe(u.bottom,0);f?A=p-2*(Y!==0||he!==0?Y+he:oe(u.left,u.right)):j=g-2*(X!==0||de!==0?X+de:oe(u.top,u.bottom))}await c({...e,availableWidth:A,availableHeight:j});const I=await o.getDimensions(a.floating);return p!==I.width||g!==I.height?{reset:{rects:!0}}:{}}}};function Cr(){return typeof window<"u"}function wt(t){return Hi(t)?(t.nodeName||"").toLowerCase():"#document"}function ce(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Se(t){var e;return(e=(Hi(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Hi(t){return Cr()?t instanceof Node||t instanceof ce(t).Node:!1}function ye(t){return Cr()?t instanceof Element||t instanceof ce(t).Element:!1}function Ee(t){return Cr()?t instanceof HTMLElement||t instanceof ce(t).HTMLElement:!1}function Ss(t){return!Cr()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ce(t).ShadowRoot}const dl=new Set(["inline","contents"]);function Nt(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=be(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!dl.has(s)}const fl=new Set(["table","td","th"]);function pl(t){return fl.has(wt(t))}const gl=[":popover-open",":modal"];function jr(t){return gl.some(e=>{try{return t.matches(e)}catch{return!1}})}const ml=["transform","translate","scale","rotate","perspective"],vl=["transform","translate","scale","rotate","perspective","filter"],yl=["paint","layout","strict","content"];function Bn(t){const e=qn(),r=ye(t)?be(t):t;return ml.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||vl.some(n=>(r.willChange||"").includes(n))||yl.some(n=>(r.contain||"").includes(n))}function bl(t){let e=Ue(t);for(;Ee(e)&&!ft(e);){if(Bn(e))return e;if(jr(e))return null;e=Ue(e)}return null}function qn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const wl=new Set(["html","body","#document"]);function ft(t){return wl.has(wt(t))}function be(t){return ce(t).getComputedStyle(t)}function $r(t){return ye(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ue(t){if(wt(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ss(t)&&t.host||Se(t);return Ss(e)?e.host:e}function Gi(t){const e=Ue(t);return ft(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ee(e)&&Nt(e)?e:Gi(e)}function Pt(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=Gi(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),o=ce(s);if(i){const a=fn(o);return e.concat(o,o.visualViewport||[],Nt(s)?s:[],a&&r?Pt(a):[])}return e.concat(s,Pt(s,[],r))}function fn(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Ji(t){const e=be(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Ee(t),i=s?t.offsetWidth:r,o=s?t.offsetHeight:n,a=mr(r)!==i||mr(n)!==o;return a&&(r=i,n=o),{width:r,height:n,$:a}}function Vn(t){return ye(t)?t:t.contextElement}function lt(t){const e=Vn(t);if(!Ee(e))return ke(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=Ji(e);let o=(i?mr(r.width):r.width)/n,a=(i?mr(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const _l=ke(0);function Qi(t){const e=ce(t);return!qn()||!e.visualViewport?_l:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function kl(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==ce(t)?!1:e}function He(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=Vn(t);let o=ke(1);e&&(n?ye(n)&&(o=lt(n)):o=lt(t));const a=kl(i,r,n)?Qi(i):ke(0);let c=(s.left+a.x)/o.x,l=(s.top+a.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const d=ce(i),f=n&&ye(n)?ce(n):n;let p=d,g=fn(p);for(;g&&n&&f!==p;){const m=lt(g),v=g.getBoundingClientRect(),b=be(g),y=v.left+(g.clientLeft+parseFloat(b.paddingLeft))*m.x,_=v.top+(g.clientTop+parseFloat(b.paddingTop))*m.y;c*=m.x,l*=m.y,u*=m.x,h*=m.y,c+=y,l+=_,p=ce(g),g=fn(p)}}return yr({width:u,height:h,x:c,y:l})}function Ir(t,e){const r=$r(t).scrollLeft;return e?e.left+r:He(Se(t)).left+r}function Yi(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-Ir(t,r),s=r.top+e.scrollTop;return{x:n,y:s}}function El(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",o=Se(n),a=e?jr(e.floating):!1;if(n===o||a&&i)return r;let c={scrollLeft:0,scrollTop:0},l=ke(1);const u=ke(0),h=Ee(n);if((h||!h&&!i)&&((wt(n)!=="body"||Nt(o))&&(c=$r(n)),Ee(n))){const f=He(n);l=lt(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const d=o&&!h&&!i?Yi(o,c):ke(0);return{width:r.width*l.x,height:r.height*l.y,x:r.x*l.x-c.scrollLeft*l.x+u.x+d.x,y:r.y*l.y-c.scrollTop*l.y+u.y+d.y}}function Sl(t){return Array.from(t.getClientRects())}function Ol(t){const e=Se(t),r=$r(t),n=t.ownerDocument.body,s=oe(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=oe(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Ir(t);const a=-r.scrollTop;return be(n).direction==="rtl"&&(o+=oe(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}const Os=25;function Al(t,e){const r=ce(t),n=Se(t),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=qn();(!u||u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}const l=Ir(n);if(l<=0){const u=n.ownerDocument,h=u.body,d=getComputedStyle(h),f=u.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,p=Math.abs(n.clientWidth-h.clientWidth-f);p<=Os&&(i-=p)}else l<=Os&&(i+=l);return{width:i,height:o,x:a,y:c}}const Tl=new Set(["absolute","fixed"]);function xl(t,e){const r=He(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=Ee(t)?lt(t):ke(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,c=s*i.x,l=n*i.y;return{width:o,height:a,x:c,y:l}}function As(t,e,r){let n;if(e==="viewport")n=Al(t,r);else if(e==="document")n=Ol(Se(t));else if(ye(e))n=xl(e,r);else{const s=Qi(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return yr(n)}function Xi(t,e){const r=Ue(t);return r===e||!ye(r)||ft(r)?!1:be(r).position==="fixed"||Xi(r,e)}function Rl(t,e){const r=e.get(t);if(r)return r;let n=Pt(t,[],!1).filter(a=>ye(a)&&wt(a)!=="body"),s=null;const i=be(t).position==="fixed";let o=i?Ue(t):t;for(;ye(o)&&!ft(o);){const a=be(o),c=Bn(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&Tl.has(s.position)||Nt(o)&&!c&&Xi(t,o))?n=n.filter(u=>u!==o):s=a,o=Ue(o)}return e.set(t,n),n}function Pl(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const o=[...r==="clippingAncestors"?jr(e)?[]:Rl(e,this._c):[].concat(r),n],a=o[0],c=o.reduce((l,u)=>{const h=As(e,u,s);return l.top=oe(h.top,l.top),l.right=De(h.right,l.right),l.bottom=De(h.bottom,l.bottom),l.left=oe(h.left,l.left),l},As(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Cl(t){const{width:e,height:r}=Ji(t);return{width:e,height:r}}function jl(t,e,r){const n=Ee(e),s=Se(e),i=r==="fixed",o=He(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=ke(0);function l(){c.x=Ir(s)}if(n||!n&&!i)if((wt(e)!=="body"||Nt(s))&&(a=$r(e)),n){const f=He(e,!0,i,e);c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}else s&&l();i&&!n&&s&&l();const u=s&&!n&&!i?Yi(s,a):ke(0),h=o.left+a.scrollLeft-c.x-u.x,d=o.top+a.scrollTop-c.y-u.y;return{x:h,y:d,width:o.width,height:o.height}}function Gr(t){return be(t).position==="static"}function Ts(t,e){if(!Ee(t)||be(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Se(t)===r&&(r=r.ownerDocument.body),r}function eo(t,e){const r=ce(t);if(jr(t))return r;if(!Ee(t)){let s=Ue(t);for(;s&&!ft(s);){if(ye(s)&&!Gr(s))return s;s=Ue(s)}return r}let n=Ts(t,e);for(;n&&pl(n)&&Gr(n);)n=Ts(n,e);return n&&ft(n)&&Gr(n)&&!Bn(n)?r:n||bl(t)||r}const $l=async function(t){const e=this.getOffsetParent||eo,r=this.getDimensions,n=await r(t.floating);return{reference:jl(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Il(t){return be(t).direction==="rtl"}const Dl={convertOffsetParentRelativeRectToViewportRelativeRect:El,getDocumentElement:Se,getClippingRect:Pl,getOffsetParent:eo,getElementRects:$l,getClientRects:Sl,getDimensions:Cl,getScale:lt,isElement:ye,isRTL:Il};function to(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Ul(t,e){let r=null,n;const s=Se(t);function i(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const l=t.getBoundingClientRect(),{left:u,top:h,width:d,height:f}=l;if(a||e(),!d||!f)return;const p=Ht(h),g=Ht(s.clientWidth-(u+d)),m=Ht(s.clientHeight-(h+f)),v=Ht(u),y={rootMargin:-p+"px "+-g+"px "+-m+"px "+-v+"px",threshold:oe(0,De(1,c))||1};let _=!0;function k(R){const j=R[0].intersectionRatio;if(j!==c){if(!_)return o();j?o(!1,j):n=setTimeout(()=>{o(!1,1e-7)},1e3)}j===1&&!to(l,t.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(k,{...y,root:s.ownerDocument})}catch{r=new IntersectionObserver(k,y)}r.observe(t)}return o(!0),i}function xm(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,l=Vn(t),u=s||i?[...l?Pt(l):[],...Pt(e)]:[];u.forEach(v=>{s&&v.addEventListener("scroll",r,{passive:!0}),i&&v.addEventListener("resize",r)});const h=l&&a?Ul(l,r):null;let d=-1,f=null;o&&(f=new ResizeObserver(v=>{let[b]=v;b&&b.target===l&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var y;(y=f)==null||y.observe(e)})),r()}),l&&!c&&f.observe(l),f.observe(e));let p,g=c?He(t):null;c&&m();function m(){const v=He(t);g&&!to(g,v)&&r(),g=v,p=requestAnimationFrame(m)}return r(),()=>{var v;u.forEach(b=>{s&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),h?.(),(v=f)==null||v.disconnect(),f=null,c&&cancelAnimationFrame(p)}}const Rm=cl,Pm=ll,Cm=il,jm=hl,$m=ol,Im=sl,Dm=ul,Um=(t,e,r)=>{const n=new Map,s={platform:Dl,...r},i={...s.platform,_c:n};return nl(t,e,{...s,platform:i})};var Dr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},zl={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Nl=class{#e=zl;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},pn=new Nl;function Ll(t){setTimeout(t,0)}var Ur=typeof window>"u"||"Deno"in globalThis;function ge(){}function Fl(t,e){return typeof t=="function"?t(e):t}function Ml(t){return typeof t=="number"&&t>=0&&t!==1/0}function Bl(t,e){return Math.max(t+(e||0)-Date.now(),0)}function gn(t,e){return typeof t=="function"?t(e):t}function ql(t,e){return typeof t=="function"?t(e):t}function xs(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==Zn(o,e.options))return!1}else if(!jt(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Rs(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(Ct(e.options.mutationKey)!==Ct(i))return!1}else if(!jt(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function Zn(t,e){return(e?.queryKeyHashFn||Ct)(t)}function Ct(t){return JSON.stringify(t,(e,r)=>mn(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function jt(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>jt(t[r],e[r])):!1}var Vl=Object.prototype.hasOwnProperty;function ro(t,e){if(t===e)return t;const r=Ps(t)&&Ps(e);if(!r&&!(mn(t)&&mn(e)))return e;const s=(r?t:Object.keys(t)).length,i=r?e:Object.keys(e),o=i.length,a=r?new Array(o):{};let c=0;for(let l=0;l<o;l++){const u=r?l:i[l],h=t[u],d=e[u];if(h===d){a[u]=h,(r?l<s:Vl.call(t,u))&&c++;continue}if(h===null||d===null||typeof h!="object"||typeof d!="object"){a[u]=d;continue}const f=ro(h,d);a[u]=f,f===h&&c++}return s===o&&c===s?t:a}function Ps(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function mn(t){if(!Cs(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Cs(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Cs(t){return Object.prototype.toString.call(t)==="[object Object]"}function Zl(t){return new Promise(e=>{pn.setTimeout(e,t)})}function Wl(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?ro(t,e):e}function Kl(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function Hl(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Wn=Symbol();function no(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Wn?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Gl=class extends Dr{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!Ur&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},so=new Gl;function Jl(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}var Ql=Ll;function Yl(){let t=[],e=0,r=a=>{a()},n=a=>{a()},s=Ql;const i=a=>{e?t.push(a):s(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{n(()=>{a.forEach(c=>{r(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var te=Yl(),Xl=class extends Dr{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!Ur&&window.addEventListener){const e=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},br=new Xl;function eu(t){return Math.min(1e3*2**t,3e4)}function io(t){return(t??"online")==="online"?br.isOnline():!0}var vn=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function oo(t){let e=!1,r=0,n;const s=Jl(),i=()=>s.status!=="pending",o=g=>{if(!i()){const m=new vn(g);d(m),t.onCancel?.(m)}},a=()=>{e=!0},c=()=>{e=!1},l=()=>so.isFocused()&&(t.networkMode==="always"||br.isOnline())&&t.canRun(),u=()=>io(t.networkMode)&&t.canRun(),h=g=>{i()||(n?.(),s.resolve(g))},d=g=>{i()||(n?.(),s.reject(g))},f=()=>new Promise(g=>{n=m=>{(i()||l())&&g(m)},t.onPause?.()}).then(()=>{n=void 0,i()||t.onContinue?.()}),p=()=>{if(i())return;let g;const m=r===0?t.initialPromise:void 0;try{g=m??t.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(h).catch(v=>{if(i())return;const b=t.retry??(Ur?0:3),y=t.retryDelay??eu,_=typeof y=="function"?y(r,v):y,k=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,v);if(e||!k){d(v);return}r++,t.onFail?.(r,v),Zl(_).then(()=>l()?void 0:f()).then(()=>{e?d(v):p()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n?.(),s),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),s)}}var ao=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ml(this.gcTime)&&(this.#e=pn.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ur?1/0:300*1e3))}clearGcTimeout(){this.#e&&(pn.clearTimeout(this.#e),this.#e=void 0)}},tu=class extends ao{#e;#t;#r;#s;#n;#o;#a;constructor(t){super(),this.#a=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#s=t.client,this.#r=this.#s.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=$s(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=$s(this.options);e.data!==void 0&&(this.setState(js(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,e){const r=Wl(this.state.data,t,this.options);return this.#i({data:r,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),r}setState(t,e){this.#i({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#n?.promise;return this.#n?.cancel(t),e?e.then(ge).catch(ge):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>ql(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Wn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>gn(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Bl(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const a=this.observers.find(c=>c.options.queryFn);a&&this.setOptions(a.options)}const r=new AbortController,n=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,r.signal)})},s=()=>{const a=no(this.options,e),l=(()=>{const u={client:this.#s,queryKey:this.queryKey,meta:this.meta};return n(u),u})();return this.#a=!1,this.options.persister?this.options.persister(a,l,this):a(l)},o=(()=>{const a={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:s};return n(a),a})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#i({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=oo({initialPromise:e?.initialPromise,fn:o.fetchFn,onCancel:a=>{a instanceof vn&&a.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(a,c)=>{this.#i({type:"failed",failureCount:a,error:c})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const a=await this.#n.start();if(a===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#r.config.onSuccess?.(a,this),this.#r.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof vn){if(a.silent)return this.#n.promise;if(a.revert){if(this.state.data===void 0)throw a;return this.state.data}}throw this.#i({type:"error",error:a}),this.#r.config.onError?.(a,this),this.#r.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#i(t){const e=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...ru(r.data,this.options),fetchMeta:t.meta??null};case"success":const n={...r,...js(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?n:void 0,n;case"error":const s=t.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=e(this.state),te.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function ru(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:io(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function js(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function $s(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function Is(t){return{onFetch:(e,r)=>{const n=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,i=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let u=!1;const h=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},d=no(e.options,e.fetchOptions),f=async(p,g,m)=>{if(u)return Promise.reject();if(g==null&&p.pages.length)return Promise.resolve(p);const b=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:g,direction:m?"backward":"forward",meta:e.options.meta};return h(R),R})(),y=await d(b),{maxPages:_}=e.options,k=m?Hl:Kl;return{pages:k(p.pages,y,_),pageParams:k(p.pageParams,g,_)}};if(s&&i.length){const p=s==="backward",g=p?nu:Ds,m={pages:i,pageParams:o},v=g(n,m);a=await f(m,v,p)}else{const p=t??i.length;do{const g=c===0?o[0]??n.initialPageParam:Ds(n,a);if(c>0&&g==null)break;a=await f(a,g),c++}while(c<p)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r):e.fetchFn=l}}}function Ds(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function nu(t,{pages:e,pageParams:r}){return e.length>0?t.getPreviousPageParam?.(e[0],e,r[0],r):void 0}var su=class extends ao{#e;#t;#r;#s;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#r=t.mutationCache,this.#t=[],this.state=t.state||iu(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=oo({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",s=!this.#s.canStart();try{if(n)e();else{this.#n({type:"pending",variables:t,isPaused:s}),await this.#r.config.onMutate?.(t,this,r);const o=await this.options.onMutate?.(t,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:t,isPaused:s})}const i=await this.#s.start();return await this.#r.config.onSuccess?.(i,t,this.state.context,this,r),await this.options.onSuccess?.(i,t,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,t,this.state.context,r),this.#n({type:"success",data:i}),i}catch(i){try{throw await this.#r.config.onError?.(i,t,this.state.context,this,r),await this.options.onError?.(i,t,this.state.context,r),await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,i,t,this.state.context,r),i}finally{this.#n({type:"error",error:i})}}finally{this.#r.runNext(this)}}#n(t){const e=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),te.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(t)}),this.#r.notify({mutation:this,type:"updated",action:t})})}};function iu(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ou=class extends Dr{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(t,e,r){const n=new su({client:t,mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(e),state:r});return this.add(n),n}add(t){this.#e.add(t);const e=Gt(t);if(typeof e=="string"){const r=this.#t.get(e);r?r.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Gt(t);if(typeof e=="string"){const r=this.#t.get(e);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Gt(t);if(typeof e=="string"){const n=this.#t.get(e)?.find(s=>s.state.status==="pending");return!n||n===t}else return!0}runNext(t){const e=Gt(t);return typeof e=="string"?this.#t.get(e)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){te.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(r=>Rs(e,r))}findAll(t={}){return this.getAll().filter(e=>Rs(t,e))}notify(t){te.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return te.batch(()=>Promise.all(t.map(e=>e.continue().catch(ge))))}};function Gt(t){return t.options.scope?.id}var au=class extends Dr{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,r){const n=e.queryKey,s=e.queryHash??Zn(n,e);let i=this.get(s);return i||(i=new tu({client:t,queryKey:n,queryHash:s,options:t.defaultQueryOptions(e),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(i)),i}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){te.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(r=>xs(e,r))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(r=>xs(t,r)):e}notify(t){te.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){te.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){te.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},zm=class{#e;#t;#r;#s;#n;#o;#a;#i;constructor(t={}){this.#e=t.queryCache||new au,this.#t=t.mutationCache||new ou,this.#r=t.defaultOptions||{},this.#s=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=so.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=br.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#i?.(),this.#i=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=this.#e.build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(gn(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=this.#e.get(n.queryHash)?.state.data,o=Fl(e,i);if(o!==void 0)return this.#e.build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return te.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;te.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=this.#e;return te.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=te.batch(()=>this.#e.findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(ge).catch(ge)}invalidateQueries(t,e={}){return te.batch(()=>(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=te.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(ge)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(ge)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=this.#e.build(this,e);return r.isStaleByTime(gn(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ge).catch(ge)}fetchInfiniteQuery(t){return t.behavior=Is(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ge).catch(ge)}ensureInfiniteQueryData(t){return t.behavior=Is(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return br.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,e){this.#s.set(Ct(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#s.values()],r={};return e.forEach(n=>{jt(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){this.#n.set(Ct(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#n.values()],r={};return e.forEach(n=>{jt(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Zn(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Wn&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Te={},Jt={},yn=function(t,e){return yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},yn(t,e)};function co(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");yn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var pt=function(){return pt=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},pt.apply(this,arguments)};function Qe(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function lo(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function uo(t,e){return function(r,n){e(r,n,t)}}function ho(t,e,r,n,s,i){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!e&&t?n.static?t:t.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),h,d=!1,f=r.length-1;f>=0;f--){var p={};for(var g in n)p[g]=g==="access"?{}:n[g];for(var g in n.access)p.access[g]=n.access[g];p.addInitializer=function(v){if(d)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(v||null))};var m=(0,r[f])(a==="accessor"?{get:u.get,set:u.set}:u[c],p);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(h=o(m.get))&&(u.get=h),(h=o(m.set))&&(u.set=h),(h=o(m.init))&&s.unshift(h)}else(h=o(m))&&(a==="field"?s.unshift(h):u[c]=h)}l&&Object.defineProperty(l,n.name,u),d=!0}function fo(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function po(t){return typeof t=="symbol"?t:"".concat(t)}function go(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function mo(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function E(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function vo(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(n=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,s=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],s=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var zr=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});function yo(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&zr(e,t,r)}function wr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kn(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function bo(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Kn(arguments[e]));return t}function wo(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function _o(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function gt(t){return this instanceof gt?(this.v=t,this):new gt(t)}function ko(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(p){return Promise.resolve(p).then(f,h)}}function a(f,p){n[f]&&(s[f]=function(g){return new Promise(function(m,v){i.push([f,g,m,v])>1||c(f,g)})},p&&(s[f]=p(s[f])))}function c(f,p){try{l(n[f](p))}catch(g){d(i[0][3],g)}}function l(f){f.value instanceof gt?Promise.resolve(f.value.v).then(u,h):d(i[0][2],f)}function u(f){c("next",f)}function h(f){c("throw",f)}function d(f,p){f(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Eo(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:gt(t[s](o)),done:!1}:i?i(o):o}:i}}function So(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof wr=="function"?wr(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Oo(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var cu=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},bn=function(t){return bn=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},bn(t)};function Ao(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=bn(t),n=0;n<r.length;n++)r[n]!=="default"&&zr(e,t,r[n]);return cu(e,t),e}function To(t){return t&&t.__esModule?t:{default:t}}function xo(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Ro(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function Po(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Co(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var lu=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function jo(t){function e(i){t.error=t.hasError?new lu(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function $o(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?e?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):t}const uu={__extends:co,__assign:pt,__rest:Qe,__decorate:lo,__param:uo,__esDecorate:ho,__runInitializers:fo,__propKey:po,__setFunctionName:go,__metadata:mo,__awaiter:E,__generator:vo,__createBinding:zr,__exportStar:yo,__values:wr,__read:Kn,__spread:bo,__spreadArrays:wo,__spreadArray:_o,__await:gt,__asyncGenerator:ko,__asyncDelegator:Eo,__asyncValues:So,__makeTemplateObject:Oo,__importStar:Ao,__importDefault:To,__classPrivateFieldGet:xo,__classPrivateFieldSet:Ro,__classPrivateFieldIn:Po,__addDisposableResource:Co,__disposeResources:jo,__rewriteRelativeImportExtension:$o},hu=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Co,get __assign(){return pt},__asyncDelegator:Eo,__asyncGenerator:ko,__asyncValues:So,__await:gt,__awaiter:E,__classPrivateFieldGet:xo,__classPrivateFieldIn:Po,__classPrivateFieldSet:Ro,__createBinding:zr,__decorate:lo,__disposeResources:jo,__esDecorate:ho,__exportStar:yo,__extends:co,__generator:vo,__importDefault:To,__importStar:Ao,__makeTemplateObject:Oo,__metadata:mo,__param:uo,__propKey:po,__read:Kn,__rest:Qe,__rewriteRelativeImportExtension:$o,__runInitializers:fo,__setFunctionName:go,__spread:bo,__spreadArray:_o,__spreadArrays:wo,__values:wr,default:uu},Symbol.toStringTag,{value:"Module"})),du=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Nr=class extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}},Io=class extends Nr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},wn=class extends Nr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},_n=class extends Nr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var _r;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(_r||(_r={}));class fu{constructor(e,{headers:r={},customFetch:n,region:s=_r.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=du(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return E(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:a,method:c,body:l,signal:u,timeout:h}=n;let d={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(d["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let g;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(d["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(d["Content-Type"]="application/json",g=JSON.stringify(l)):g=l;let m=u;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),u?(m=o.signal,u.addEventListener("abort",()=>o.abort())):m=o.signal);const v=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:g,signal:m}).catch(k=>{throw new Io(k)}),b=v.headers.get("x-relay-error");if(b&&b==="true")throw new wn(v);if(!v.ok)throw new _n(v);let y=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return y==="application/json"?_=yield v.json():y==="application/octet-stream"||y==="application/pdf"?_=yield v.blob():y==="text/event-stream"?_=v:y==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(a){return{data:null,error:a,response:a instanceof _n||a instanceof wn?a.context:void 0}}finally{i&&clearTimeout(i)}})}}const pu=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return _r},FunctionsClient:fu,FunctionsError:Nr,FunctionsFetchError:Io,FunctionsHttpError:_n,FunctionsRelayError:wn},Symbol.toStringTag,{value:"Module"})),Do=zt(pu);var Q={};const _t=zt(hu);var Qt={},Yt={},Xt={},er={},tr={},rr={},Us;function Uo(){if(Us)return rr;Us=1,Object.defineProperty(rr,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return rr.default=t,rr}var zs;function zo(){if(zs)return tr;zs=1,Object.defineProperty(tr,"__esModule",{value:!0});const e=_t.__importDefault(Uo());let r=class{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var l,u,h,d;let f=null,p=null,g=null,m=c.status,v=c.statusText;if(c.ok){if(this.method!=="HEAD"){const k=await c.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?p=k:p=JSON.parse(k))}const y=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),_=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");y&&_&&_.length>1&&(g=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,g=null,m=406,v="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const y=await c.text();try{f=JSON.parse(y),Array.isArray(f)&&c.status===404&&(p=[],f=null,m=200,v="OK")}catch{c.status===404&&y===""?(m=204,v="No Content"):f={message:y}}if(f&&this.isMaybeSingle&&(!((d=f?.details)===null||d===void 0)&&d.includes("0 rows"))&&(f=null,m=200,v="OK"),f&&this.shouldThrowOnError)throw new e.default(f)}return{error:f,data:p,count:g,status:m,statusText:v}});return this.shouldThrowOnError||(a=a.catch(c=>{var l,u,h,d,f,p;let g="";const m=c?.cause;if(m){const v=(l=m?.message)!==null&&l!==void 0?l:"",b=(u=m?.code)!==null&&u!==void 0?u:"";g=`${(h=c?.name)!==null&&h!==void 0?h:"FetchError"}: ${c?.message}`,g+=`

Caused by: ${(d=m?.name)!==null&&d!==void 0?d:"Error"}: ${v}`,b&&(g+=` (${b})`),m?.stack&&(g+=`
${m.stack}`)}else g=(f=c?.stack)!==null&&f!==void 0?f:"";return{error:{message:`${(p=c?.name)!==null&&p!==void 0?p:"FetchError"}: ${c?.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(s,i)}returns(){return this}overrideTypes(){return this}};return tr.default=r,tr}var Ns;function No(){if(Ns)return er;Ns=1,Object.defineProperty(er,"__esModule",{value:!0});const e=_t.__importDefault(zo());let r=class extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:c=a}={}){const l=c?`${c}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const c=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(l,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:c=!1,format:l="text"}={}){var u;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,c?"wal":null].filter(Boolean).join("|"),d=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${d}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};return er.default=r,er}var Ls;function Hn(){if(Ls)return Xt;Ls=1,Object.defineProperty(Xt,"__esModule",{value:!0});const e=_t.__importDefault(No()),r=new RegExp("[,()]");let n=class extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:c}={}){let l="";c==="plain"?l="pl":c==="phrase"?l="ph":c==="websearch"&&(l="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${l}fts${u}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const c=a?`${a}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}};return Xt.default=n,Xt}var Fs;function Lo(){if(Fs)return Yt;Fs=1,Object.defineProperty(Yt,"__esModule",{value:!0});const e=_t.__importDefault(Hn());let r=class{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,i){const{head:o=!1,count:a}=i??{},c=o?"HEAD":"GET";let l=!1;const u=(s??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const l=s.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(l.length>0){const u=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:c=!0}={}){var l;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(h.length>0){const d=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};return Yt.default=r,Yt}var Ms;function gu(){if(Ms)return Qt;Ms=1,Object.defineProperty(Qt,"__esModule",{value:!0});const t=_t,e=t.__importDefault(Lo()),r=t.__importDefault(Hn());let n=class Fo{constructor(i,{headers:o={},schema:a,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=c}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new Fo(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:c=!1,count:l}={}){var u;let h;const d=new URL(`${this.url}/rpc/${i}`);let f;a||c?(h=a?"HEAD":"GET",Object.entries(o).filter(([g,m])=>m!==void 0).map(([g,m])=>[g,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([g,m])=>{d.searchParams.append(g,m)})):(h="POST",f=o);const p=new Headers(this.headers);return l&&p.set("Prefer",`count=${l}`),new r.default({method:h,url:d,headers:p,schema:this.schemaName,body:f,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};return Qt.default=n,Qt}var Bs;function Mo(){if(Bs)return Q;Bs=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.PostgrestError=Q.PostgrestBuilder=Q.PostgrestTransformBuilder=Q.PostgrestFilterBuilder=Q.PostgrestQueryBuilder=Q.PostgrestClient=void 0;const t=_t,e=t.__importDefault(gu());Q.PostgrestClient=e.default;const r=t.__importDefault(Lo());Q.PostgrestQueryBuilder=r.default;const n=t.__importDefault(Hn());Q.PostgrestFilterBuilder=n.default;const s=t.__importDefault(No());Q.PostgrestTransformBuilder=s.default;const i=t.__importDefault(zo());Q.PostgrestBuilder=i.default;const o=t.__importDefault(Uo());return Q.PostgrestError=o.default,Q.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},Q}class Bo{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const mu="2.86.2",vu=`realtime-js/${mu}`,qo="1.0.0",yu="2.0.0",qs=qo,kn=1e4,bu=1e3,wu=100;var Ve;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ve||(Ve={}));var F;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(F||(F={}));var ve;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ve||(ve={}));var En;(function(t){t.websocket="websocket"})(En||(En={}));var Ze;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ze||(Ze={}));class _u{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",c=(i=e.join_ref)!==null&&i!==void 0?i:"",l=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+o.length+l.length+h.length,f=new ArrayBuffer(this.HEADER_LENGTH+d);let p=new DataView(f),g=0;p.setUint8(g++,this.KINDS.userBroadcastPush),p.setUint8(g++,c.length),p.setUint8(g++,a.length),p.setUint8(g++,o.length),p.setUint8(g++,l.length),p.setUint8(g++,h.length),p.setUint8(g++,r),Array.from(c,v=>p.setUint8(g++,v.charCodeAt(0))),Array.from(a,v=>p.setUint8(g++,v.charCodeAt(0))),Array.from(o,v=>p.setUint8(g++,v.charCodeAt(0))),Array.from(l,v=>p.setUint8(g++,v.charCodeAt(0))),Array.from(h,v=>p.setUint8(g++,v.charCodeAt(0)));var m=new Uint8Array(f.byteLength+n.byteLength);return m.set(new Uint8Array(f),0),m.set(new Uint8Array(n),f.byteLength),m.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,i,o,a,c]=n;return r({join_ref:s,ref:i,topic:o,event:a,payload:c})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),a=r.getUint8(4);let c=this.HEADER_LENGTH+4;const l=n.decode(e.slice(c,c+s));c=c+s;const u=n.decode(e.slice(c,c+i));c=c+i;const h=n.decode(e.slice(c,c+o));c=c+o;const d=e.slice(c,e.byteLength),f=a===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,p={type:this.BROADCAST_EVENT,event:u,payload:f};return o>0&&(p.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class Vo{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var D;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(D||(D={}));const Vs=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=ku(o,t,e,s),i),{}):{}},ku=(t,e,r,n)=>{const s=e.find(a=>a.name===t),i=s?.type,o=r[t];return i&&!n.includes(i)?Zo(i,o):Sn(o)},Zo=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Au(e,r)}switch(t){case D.bool:return Eu(e);case D.float4:case D.float8:case D.int2:case D.int4:case D.int8:case D.numeric:case D.oid:return Su(e);case D.json:case D.jsonb:return Ou(e);case D.timestamp:return Tu(e);case D.abstime:case D.date:case D.daterange:case D.int4range:case D.int8range:case D.money:case D.reltime:case D.text:case D.time:case D.timestamptz:case D.timetz:case D.tsrange:case D.tstzrange:return Sn(e);default:return Sn(e)}},Sn=t=>t,Eu=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Su=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ou=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Au=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Zo(e,a))}return t},Tu=t=>typeof t=="string"?t.replace(" ","T"):t,Wo=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Jr{constructor(e,r,n={},s=kn){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var On;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(On||(On={}));let Ko=class hr{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hr.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=hr.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=hr.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const h=i[l];if(h){const d=u.map(m=>m.presence_ref),f=h.map(m=>m.presence_ref),p=u.filter(m=>f.indexOf(m.presence_ref)<0),g=h.filter(m=>d.indexOf(m.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const h=e[a].map(f=>f.presence_ref),d=u.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}n(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(h=>h.presence_ref);l=l.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var An;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(An||(An={}));var ut;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ut||(ut={}));var we;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(we||(we={}));const xu=F;let Ho=class Go{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=F.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Jr(this,ve.join,this.params,this.timeout),this.rejoinTimer=new Vo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=F.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=F.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=F.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=F.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=F.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ve.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Ko(this),this.broadcastEndpointURL=Wo(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==F.closed){const{config:{broadcast:o,presence:a,private:c}}=this.params,l=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[ut.PRESENCE]&&this.bindings[ut.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},d={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e?.(we.CHANNEL_ERROR,f)),this._onClose(()=>e?.(we.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){e?.(we.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,m=(p=g?.length)!==null&&p!==void 0?p:0,v=[];for(let b=0;b<m;b++){const y=g[b],{filter:{event:_,schema:k,table:R,filter:j}}=y,A=f&&f[b];if(A&&A.event===_&&A.schema===k&&A.table===R&&A.filter===j)v.push(Object.assign(Object.assign({},y),{id:A.id}));else{this.unsubscribe(),this.state=F.errored,e?.(we.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(we.SUBSCRIBED);return}}).receive("error",f=>{this.state=F.errored,e?.(we.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.(we.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===F.joined&&e===ut.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{const l=await a.json();c=l.error||l.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=F.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ve.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Jr(this,ve.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=F.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Jr(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>wu){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=ve;if(n&&[a,c,l,u].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,r,n);if(r&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,m;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(g=f.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(d,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,m,v,b,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,k=(p=f.filter)===null||p===void 0?void 0:p.event;return _&&((g=r.ids)===null||g===void 0?void 0:g.includes(_))&&(k==="*"||k?.toLocaleLowerCase()===((m=r.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const _=(b=(v=f?.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((y=r?.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:g,table:m,commit_timestamp:v,type:b,errors:y}=p;d=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:v,eventType:b,new:{},old:{},errors:y}),this._getPayloadRecords(p))}f.callback(d,n)})}_isClosed(){return this.state===F.closed}_isJoined(){return this.state===F.joined}_isJoining(){return this.state===F.joining}_isLeaving(){return this.state===F.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Go.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ve.close,{},e)}_onError(e){this._on(ve.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=F.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Vs(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Vs(e.columns,e.old_record)),r}};const Qr=()=>{},nr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ru=[1e3,2e3,5e3,1e4],Pu=1e4,Cu=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let ju=class{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=kn,this.transport=null,this.heartbeatIntervalMs=nr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qr,this.ref=0,this.reconnectTimer=null,this.vsn=qs,this.logger=Qr,this.conn=null,this.sendBuffer=[],this.serializer=new _u,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${En.websocket}`,this.httpEndpoint=Wo(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Bo.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ve.connecting:return Ze.Connecting;case Ve.open:return Ze.Open;case Ve.closing:return Ze.Closing;default:return Ze.Closed}}isConnected(){return this.connectionState()===Ze.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Ho(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(bu,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},nr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(l){this.log("error","error in heartbeat callback",l)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${a}`.trim(),i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ve.open||this.conn.readyState===Ve.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ve.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Cu],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:vu};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ve.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Vo(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},nr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,o,a,c,l,u,h,d,f;switch(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:kn,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:nr.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e?.heartbeatCallback)!==null&&a!==void 0?a:Qr,this.vsn=(c=e?.vsn)!==null&&c!==void 0?c:qs,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e?.reconnectAfterMs)!==null&&l!==void 0?l:(p=>Ru[p-1]||Pu),this.vsn){case qo:this.encode=(u=e?.encode)!==null&&u!==void 0?u:((p,g)=>g(JSON.stringify(p))),this.decode=(h=e?.decode)!==null&&h!==void 0?h:((p,g)=>g(JSON.parse(p)));break;case yu:this.encode=(d=e?.encode)!==null&&d!==void 0?d:this.serializer.encode.bind(this.serializer),this.decode=(f=e?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};const $u=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:xu,get REALTIME_LISTEN_TYPES(){return ut},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return An},get REALTIME_PRESENCE_LISTEN_EVENTS(){return On},get REALTIME_SUBSCRIBE_STATES(){return we},RealtimeChannel:Ho,RealtimeClient:ju,RealtimePresence:Ko,WebSocketFactory:Bo},Symbol.toStringTag,{value:"Module"})),Jo=zt($u);class Lt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function z(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Qo extends Lt{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kr extends Lt{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Gn=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Iu=()=>Response,Tn=t=>{if(Array.isArray(t))return t.map(r=>Tn(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Tn(n)}),e},Du=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Uu=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Yr=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},zu=(t,e,r)=>E(void 0,void 0,void 0,function*(){const n=yield Iu();t instanceof n&&!r?.noResolveJson?t.json().then(s=>{const i=t.status||500,o=s?.statusCode||i+"";e(new Qo(Yr(s),i,o))}).catch(s=>{e(new kr(Yr(s),s))}):e(new kr(Yr(t),t))}),Nu=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"||!n?s:(Du(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,e?.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function Ft(t,e,r,n,s,i){return E(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,Nu(e,n,s,i)).then(c=>{if(!c.ok)throw c;return n?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>zu(c,a,n))})})}function $t(t,e,r,n){return E(this,void 0,void 0,function*(){return Ft(t,"GET",e,r,n)})}function me(t,e,r,n,s){return E(this,void 0,void 0,function*(){return Ft(t,"POST",e,n,s,r)})}function xn(t,e,r,n,s){return E(this,void 0,void 0,function*(){return Ft(t,"PUT",e,n,s,r)})}function Lu(t,e,r,n){return E(this,void 0,void 0,function*(){return Ft(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Jn(t,e,r,n,s){return E(this,void 0,void 0,function*(){return Ft(t,"DELETE",e,n,s,r)})}class Fu{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return E(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(z(e))return{data:null,error:e};throw e}})}}var Yo;class Mu{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[Yo]="BlobDownloadBuilder",this.promise=null}asStream(){return new Fu(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return E(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(z(e))return{data:null,error:e};throw e}})}}Yo=Symbol.toStringTag;const Bu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qu{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Gn(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return E(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Zs),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s?.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(r),u=this._getFinalPath(l),h=yield(e=="PUT"?xn:me)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:l,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(z(i))return{data:null,error:i};throw i}})}upload(e,r,n){return E(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return E(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let c;const l=Object.assign({upsert:Zs.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",l.cacheControl)):(c=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const h=yield xn(this.fetch,a.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(z(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return E(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r?.upsert&&(s["x-upsert"]="true");const i=yield me(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Lt("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(z(n))return{data:null,error:n};throw n}})}update(e,r,n){return E(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return E(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(z(s))return{data:null,error:s};throw s}})}copy(e,r,n){return E(this,void 0,void 0,function*(){try{return{data:{path:(yield me(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(z(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return E(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield me(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(z(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return E(this,void 0,void 0,function*(){try{const s=yield me(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(z(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),c=()=>$t(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new Mu(c,this.shouldThrowOnError)}info(e){return E(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield $t(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Tn(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(z(n))return{data:null,error:n};throw n}})}exists(e){return E(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Lu(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(z(n)&&n instanceof kr){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof r?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(r?.transform||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${l}`)}}}remove(e){return E(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(z(r))return{data:null,error:r};throw r}})}list(e,r,n){return E(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Bu),r),{prefix:e||""});return{data:yield me(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(z(s))return{data:null,error:s};throw s}})}listV2(e,r){return E(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield me(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(z(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Xo="2.86.2",ea={"X-Client-Info":`storage-js/${Xo}`};class Vu{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ea),r),this.fetch=Gn(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return E(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield $t(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(z(r))return{data:null,error:r};throw r}})}getBucket(e){return E(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(z(r))return{data:null,error:r};throw r}})}createBucket(e){return E(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield me(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(z(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return E(this,void 0,void 0,function*(){try{return{data:yield xn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(z(n))return{data:null,error:n};throw n}})}emptyBucket(e){return E(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(z(r))return{data:null,error:r};throw r}})}deleteBucket(e){return E(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(z(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var It=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Zu(t,e,r){const n=new URL(e,t);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function Wu(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Ku(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const a=Zu(t.baseUrl,n,s),c=await Wu(t.auth),l=await e(a,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),u=await l.text(),h=(l.headers.get("content-type")||"").includes("application/json"),d=h&&u?JSON.parse(u):u;if(!l.ok){const f=h?d:void 0,p=f?.error;throw new It(p?.message??`Request failed with status ${l.status}`,{status:l.status,icebergType:p?.type,icebergCode:p?.code,details:f})}return{status:l.status,headers:l.headers,data:d}}}}function sr(t){return t.join("")}var Hu=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:sr(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${sr(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sr(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${sr(t.namespace)}`}),!0}catch(e){if(e instanceof It&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof It&&r.status===409)return;throw r}}};function tt(t){return t.join("")}var Gu=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tt(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${tt(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${tt(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${tt(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tt(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${tt(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof It&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof It&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},Ju=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Ku({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new Hu(this.client,e),this.tableOps=new Gu(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class ta{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ea),r),this.fetch=Gn(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return E(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(z(r))return{data:null,error:r};throw r}})}listBuckets(e){return E(this,void 0,void 0,function*(){try{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield $t(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(z(r))return{data:null,error:r};throw r}})}deleteBucket(e){return E(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(z(r))return{data:null,error:r};throw r}})}from(e){if(!Uu(e))throw new Lt("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new Ju({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>E(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Qn={"X-Client-Info":`storage-js/${Xo}`,"Content-Type":"application/json"};class Yn extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function se(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class dr extends Yn{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ra extends Yn{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Rn;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Rn||(Rn={}));const Lr=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Qu=()=>Response,na=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Yu=t=>Array.from(new Float32Array(t)),Xu=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},Ws=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),eh=(t,e,r)=>E(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=o?.statusCode||o?.code||s+"";e(new dr(Ws(o),s,a))}).catch(()=>{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new dr(a,s,o))});else{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new dr(a,s,o))}}else e(new ra(Ws(t),t))}),th=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return n?(na(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function rh(t,e,r,n,s,i){return E(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,th(e,n,s,i)).then(c=>{if(!c.ok)throw c;if(n?.noResolveJson)return c;const l=c.headers.get("content-type");return!l||!l.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>eh(c,a,n))})})}function ae(t,e,r,n,s){return E(this,void 0,void 0,function*(){return rh(t,"POST",e,n,s,r)})}class sa{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qn),r),this.fetch=Lr(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return E(this,void 0,void 0,function*(){try{return{data:(yield ae(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}getIndex(e,r){return E(this,void 0,void 0,function*(){try{return{data:yield ae(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n))return{data:null,error:n};throw n}})}listIndexes(e){return E(this,void 0,void 0,function*(){try{return{data:yield ae(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return E(this,void 0,void 0,function*(){try{return{data:(yield ae(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n))return{data:null,error:n};throw n}})}}class ia{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qn),r),this.fetch=Lr(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return E(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ae(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}getVectors(e){return E(this,void 0,void 0,function*(){try{return{data:yield ae(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}listVectors(e){return E(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield ae(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}queryVectors(e){return E(this,void 0,void 0,function*(){try{return{data:yield ae(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}deleteVectors(e){return E(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ae(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}}class oa{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qn),r),this.fetch=Lr(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return E(this,void 0,void 0,function*(){try{return{data:(yield ae(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}getBucket(e){return E(this,void 0,void 0,function*(){try{return{data:yield ae(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}listBuckets(){return E(this,arguments,void 0,function*(e={}){try{return{data:yield ae(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}deleteBucket(e){return E(this,void 0,void 0,function*(){try{return{data:(yield ae(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}}class aa extends oa{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new ca(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return E(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return E(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return E(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return E(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class ca extends sa{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return E(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return E(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return E(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return E(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new la(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class la extends ia{constructor(e,r,n,s,i){super(e,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return E(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return E(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return E(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return E(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return E(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class nh extends Vu{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new qu(this.url,this.headers,e,this.fetch)}get vectors(){return new aa(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ta(this.url+"/iceberg",this.headers,this.fetch)}}const sh=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:ta,StorageApiError:Qo,StorageClient:nh,StorageError:Lt,StorageUnknownError:kr,StorageVectorsApiError:dr,StorageVectorsClient:aa,StorageVectorsError:Yn,get StorageVectorsErrorCode(){return Rn},StorageVectorsUnknownError:ra,VectorBucketApi:oa,VectorBucketScope:ca,VectorDataApi:ia,VectorIndexApi:sa,VectorIndexScope:la,isPlainObject:na,isStorageError:z,isStorageVectorsError:se,normalizeToFloat32:Yu,resolveFetch:Lr,resolveResponse:Qu,validateVectorDimension:Xu},Symbol.toStringTag,{value:"Module"})),ih=zt(sh);var Xr={},Ot={},Ks;function oh(){return Ks||(Ks=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.version=void 0,Ot.version="2.86.2"),Ot}var Hs;function ah(){return Hs||(Hs=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=oh();let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(Xr)),Xr}var en={},Gs;function ch(){return Gs||(Gs=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=s=>s?(...i)=>s(...i):(...i)=>fetch(...i);t.resolveFetch=e;const r=()=>Headers;t.resolveHeadersConstructor=r;const n=(s,i,o)=>{const a=(0,t.resolveFetch)(o),c=(0,t.resolveHeadersConstructor)();return async(l,u)=>{var h;const d=(h=await i())!==null&&h!==void 0?h:s;let f=new c(u?.headers);return f.has("apikey")||f.set("apikey",s),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),a(l,Object.assign(Object.assign({},u),{headers:f}))}};t.fetchWithAuth=n})(en)),en}var xe={},Js;function lh(){if(Js)return xe;Js=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.isBrowser=void 0,xe.uuid=t,xe.ensureTrailingSlash=e,xe.applySettingDefaults=n,xe.validateSupabaseUrl=s;function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var o=Math.random()*16|0,a=i=="x"?o:o&3|8;return a.toString(16)})}function e(i){return i.endsWith("/")?i:i+"/"}const r=()=>typeof window<"u";xe.isBrowser=r;function n(i,o){var a,c;const{db:l,auth:u,realtime:h,global:d}=i,{db:f,auth:p,realtime:g,global:m}=o,v={db:Object.assign(Object.assign({},f),l),auth:Object.assign(Object.assign({},p),u),realtime:Object.assign(Object.assign({},g),h),storage:{},global:Object.assign(Object.assign(Object.assign({},m),d),{headers:Object.assign(Object.assign({},(a=m?.headers)!==null&&a!==void 0?a:{}),(c=d?.headers)!==null&&c!==void 0?c:{})}),accessToken:async()=>""};return i.accessToken?v.accessToken=i.accessToken:delete v.accessToken,v}function s(i){const o=i?.trim();if(!o)throw new Error("supabaseUrl is required.");if(!o.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(o))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return xe}var At={};const ua="2.86.2",ot=30*1e3,Pn=3,tn=Pn*ot,uh="http://localhost:9999",hh="supabase.auth.token",dh={"X-Client-Info":`gotrue-js/${ua}`},Cn="X-Supabase-Api-Version",ha={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},fh=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ph=600*1e3;let mt=class extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}};function T(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let da=class extends mt{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}};function fa(t){return T(t)&&t.name==="AuthApiError"}let $e=class extends mt{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}},Ce=class extends mt{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}},ne=class extends Ce{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function pa(t){return T(t)&&t.name==="AuthSessionMissingError"}let Me=class extends Ce{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Tt=class extends Ce{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},xt=class extends Ce{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function ga(t){return T(t)&&t.name==="AuthImplicitGrantRedirectError"}let jn=class extends Ce{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Er=class extends Ce{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}};function fr(t){return T(t)&&t.name==="AuthRetryableFetchError"}let $n=class extends Ce{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}};function gh(t){return T(t)&&t.name==="AuthWeakPasswordError"}let Sr=class extends Ce{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Or="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qs=` 	
\r=`.split(""),mh=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Qs.length;e+=1)t[Qs[e].charCodeAt(0)]=-2;for(let e=0;e<Or.length;e+=1)t[Or[e].charCodeAt(0)]=e;return t})();function Ys(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Or[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Or[n]),e.queuedBits-=6}}function ma(t,e,r){const n=mh[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Xs(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{bh(o,n,r)};for(let o=0;o<t.length;o+=1)ma(t.charCodeAt(o),s,i);return e.join("")}function vh(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function yh(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}vh(n,e)}}function bh(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ht(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)ma(t.charCodeAt(s),r,n);return new Uint8Array(e)}function wh(t){const e=[];return yh(t,r=>e.push(r)),new Uint8Array(e)}function We(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>Ys(s,r,n)),Ys(null,r,n),e.join("")}function _h(t){return Math.round(Date.now()/1e3)+t}function kh(){return Symbol("auth-callback")}const J=()=>typeof window<"u"&&typeof document<"u",Le={tested:!1,writable:!1},va=()=>{if(!J())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Le.tested)return Le.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Le.tested=!0,Le.writable=!0}catch{Le.tested=!0,Le.writable=!1}return Le.writable};function Eh(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const ya=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Sh=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",at=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Fe=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},G=async(t,e)=>{await t.removeItem(e)};class Fr{constructor(){this.promise=new Fr.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Fr.promiseConstructor=Promise;function rn(t){const e=t.split(".");if(e.length!==3)throw new Sr("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!fh.test(e[n]))throw new Sr("JWT not in base64url format");return{header:JSON.parse(Xs(e[0])),payload:JSON.parse(Xs(e[1])),signature:ht(e[2]),raw:{header:e[0],payload:e[1]}}}async function Oh(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ah(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Th(t){return("0"+t.toString(16)).substr(-2)}function xh(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Th).join("")}async function Rh(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Ph(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Rh(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function rt(t,e,r=!1){const n=xh();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await at(t,`${e}-code-verifier`,s);const i=await Ph(n);return[i,n===i?"plain":"s256"]}const Ch=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jh(t){const e=t.headers.get(Cn);if(!e||!e.match(Ch))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function $h(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Ih(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Dh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function nt(t){if(!Dh.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nn(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Uh(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function ei(t){return JSON.parse(JSON.stringify(t))}const Be=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zh=[502,503,504];async function ti(t){var e;if(!Sh(t))throw new Er(Be(t),0);if(zh.includes(t.status))throw new Er(Be(t),t.status);let r;try{r=await t.json()}catch(i){throw new $e(Be(i),i)}let n;const s=jh(t);if(s&&s.getTime()>=ha["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new $n(Be(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new ne}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new $n(Be(r),t.status,r.weak_password.reasons);throw new da(Be(r),t.status||500,n)}const Nh=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function P(t,e,r,n){var s;const i=Object.assign({},n?.headers);i[Cn]||(i[Cn]=ha["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Lh(t,e,r+a,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(c):{data:Object.assign({},c),error:null}}async function Lh(t,e,r,n,s,i){const o=Nh(e,n,s,i);let a;try{a=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new Er(Be(c),0)}if(a.ok||await ti(a),n?.noResolveJson)return a;try{return await a.json()}catch(c){await ti(c)}}function pe(t){var e;let r=null;Bh(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=_h(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function ri(t){const e=pe(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ie(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Fh(t){return{data:t,error:null}}function Mh(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=Qe(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function ni(t){return t}function Bh(t){return t.access_token&&t.refresh_token&&t.expires_in}const pr=["global","local","others"];let Xn=class{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=ya(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=pr[0]){if(pr.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pr.join(", ")}`);try{return await P(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(T(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await P(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ie})}catch(n){if(T(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Qe(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await P(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Mh,redirectTo:r?.redirectTo})}catch(r){if(T(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await P(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ie})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await P(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ni});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);l[`${m}Page`]=g}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(T(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){nt(e);try{return await P(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ie})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){nt(e);try{return await P(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Ie})}catch(n){if(T(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){nt(e);try{return await P(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ie})}catch(n){if(T(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){nt(e.userId);try{const{data:r,error:n}=await P(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(T(r))return{data:null,error:r};throw r}}async _deleteFactor(e){nt(e.userId),nt(e.id);try{return{data:await P(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await P(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ni});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);l[`${m}Page`]=g}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(T(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(T(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await P(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(T(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await P(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(T(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await P(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(T(r))return{data:null,error:r};throw r}}};function si(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const qe={debug:!!(globalThis&&va()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class es extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let ba=class extends es{};class qh extends es{}async function wa(t,e,r){qe.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),qe.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){qe.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{qe.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw qe.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ba(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(qe.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const ii={};async function Vh(t,e,r){var n;const s=(n=ii[t])!==null&&n!==void 0?n:Promise.resolve(),i=Promise.race([s.catch(()=>null),e>=0?new Promise((o,a)=>{setTimeout(()=>{a(new qh(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await r());return ii[t]=i.catch(async o=>{if(o&&o.isAcquireTimeout)return await s,null;throw o}),await i}function Zh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function _a(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Wh(t){return parseInt(t,16)}function Kh(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Hh(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:c,resources:l,scheme:u,uri:h,version:d}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=_a(t.address),p=u?`${u}://${n}`:n,g=t.statement?`${t.statement}
`:"",m=`${p} wants you to sign in with your Ethereum account:
${f}

${g}`;let v=`URI: ${h}
Version: ${d}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),a&&(v+=`
Not Before: ${a.toISOString()}`),c&&(v+=`
Request ID: ${c}`),l){let b=`
Resources:`;for(const y of l){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);b+=`
- ${y}`}v+=b}return`${m}
${v}`}class M extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Ar extends M{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Gh({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new M({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new M({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new M({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new M({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new M({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new M({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new M({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new M({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(ka(o)){if(i.rp.id!==o)return new M({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new M({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new M({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new M({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new M({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Jh({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new M({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new M({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(ka(n)){if(r.rpId!==n)return new M({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new M({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new M({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new M({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Qh{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Yh=new Qh;function Xh(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=Qe(t,["challenge","user","excludeCredentials"]),i=ht(e).buffer,o=Object.assign(Object.assign({},r),{id:ht(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const l=n[c];a.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:ht(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function ed(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Qe(t,["challenge","allowCredentials"]),s=ht(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ht(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function td(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:We(new Uint8Array(t.response.attestationObject)),clientDataJSON:We(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function rd(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:We(new Uint8Array(s.authenticatorData)),clientDataJSON:We(new Uint8Array(s.clientDataJSON)),signature:We(new Uint8Array(s.signature)),userHandle:s.userHandle?We(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ka(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function oi(){var t,e;return!!(J()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function nd(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ar("Browser returned unexpected credential type",e)}:{data:null,error:new Ar("Empty credential response",e)}}catch(e){return{data:null,error:Gh({error:e,options:t})}}}async function sd(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ar("Browser returned unexpected credential type",e)}:{data:null,error:new Ar("Empty credential response",e)}}catch(e){return{data:null,error:Jh({error:e,options:t})}}}const id={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},od={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Tr(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(e(o)){const a=n[i];e(a)?n[i]=Tr(a,o):n[i]=Tr(o)}else n[i]=o}return n}function ad(t,e){return Tr(id,t,e||{})}function cd(t,e){return Tr(od,t,e||{})}class ld{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:a};const c=s??Yh.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:l}=o.webauthn.credential_options.publicKey;l.name||(l.name=`${l.id}:${n}`),l.displayName||(l.displayName=l.name)}switch(o.webauthn.type){case"create":{const l=ad(o.webauthn.credential_options.publicKey,i?.create),{data:u,error:h}=await nd({publicKey:l,signal:c});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const l=cd(o.webauthn.credential_options.publicKey,i?.request),{data:u,error:h}=await sd(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:l,signal:c}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return T(o)?{data:null,error:o}:{data:null,error:new $e("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new mt("rpId is required for WebAuthn authentication")};try{if(!oi())return{data:null,error:new $e("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return T(o)?{data:null,error:o}:{data:null,error:new $e("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new mt("rpId is required for WebAuthn registration")};try{if(!oi())return{data:null,error:new $e("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===e&&d.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};const{data:c,error:l}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:l}}catch(o){return T(o)?{data:null,error:o}:{data:null,error:new $e("Unexpected error in register",o)}}}}Zh();const ud={url:uh,storageKey:hh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dh,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ai(t,e,r){return await r()}const st={};let ts=class In{get jwks(){var e,r;return(r=(e=st[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){st[this.storageKey]=Object.assign(Object.assign({},st[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=st[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){st[this.storageKey]=Object.assign(Object.assign({},st[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},ud),e);if(this.storageKey=i.storageKey,this.instanceID=(r=In.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,In.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&J()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Xn({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ya(i.fetch),this.lock=i.lock||ai,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:J()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=wa:this.lock=ai,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ld(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:va()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=si(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=si(this.memoryStorage)),J()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ua}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(J()&&(r=Eh(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),J()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ga(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return T(r)?this._returnResult({error:r}):this._returnResult({error:new $e("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:pe}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(i){if(T(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:u,password:h,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await rt(this.storage,this.storageKey)),i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d?.emailRedirectTo,body:{email:u,password:h,data:(r=d?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:p},xform:pe})}else if("phone"in e){const{phone:u,password:h,options:d}=e;i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=d?.data)!==null&&n!==void 0?n:{},channel:(s=d?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:pe})}else throw new Tt("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await G(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(i){if(await G(this.storage,`${this.storageKey}-code-verifier`),T(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:a}=e;r=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ri})}else if("phone"in e){const{phone:i,password:o,options:a}=e;r=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ri})}else throw new Tt("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Me;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,o,a,c,l,u,h,d;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:g,wallet:m,statement:v,options:b}=e;let y;if(J())if(typeof m=="object")y=m;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")y=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=m}const _=new URL((r=b?.url)!==null&&r!==void 0?r:window.location.href),k=await y.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=_a(k[0]);let j=(n=b?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!j){const I=await y.request({method:"eth_chainId"});j=Wh(I)}const A={domain:_.host,address:R,statement:v,uri:_.href,version:"1",chainId:j,nonce:(s=b?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=b?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=b?.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(c=b?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(l=b?.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(u=b?.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=Hh(A),p=await y.request({method:"personal_sign",params:[Kh(f),R]})}try{const{data:g,error:m}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:p},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:pe});if(m)throw m;if(!g||!g.session||!g.user){const v=new Me;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:m})}catch(g){if(T(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var r,n,s,i,o,a,c,l,u,h,d,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:m,wallet:v,statement:b,options:y}=e;let _;if(J())if(typeof v=="object")_=v;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))_=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!y?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const k=new URL((r=y?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const R=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y?.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),b?{statement:b}:null));let j;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")j=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)j=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)p=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),g=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${k.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=y?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((a=y?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((l=y?.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(u=y?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const R=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=R}}try{const{data:m,error:v}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:We(g)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:pe});if(v)throw v;if(!m||!m.session||!m.user){const b=new Me;return this._returnResult({data:{user:null,session:null},error:b})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:v})}catch(m){if(T(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const r=await Fe(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await P(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:pe});if(await G(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Me;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await G(this.storage,`${this.storageKey}-code-verifier`),T(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,a=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:pe}),{data:c,error:l}=a;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c||!c.session||!c.user){const u=new Me;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:l})}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await rt(this.storage,this.storageKey));const{error:h}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:u})}throw new Tt("You must provide either an email or phone number.")}catch(a){if(await G(this.storage,`${this.storageKey}-code-verifier`),T(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await P(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:pe});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(s){if(T(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,i,o;try{let a=null,c=null;this.flowType==="pkce"&&([a,c]=await rt(this.storage,this.storageKey));const l=await P(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:c}),headers:this.headers,xform:Fh});return!((i=l.data)===null||i===void 0)&&i.url&&J()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(a){if(await G(this.storage,`${this.storageKey}-code-verifier`),T(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new ne;const{error:s}=await P(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(T(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await P(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await P(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:a})}throw new Tt("You must provide either an email or phone number and a type")}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Fe(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<tn:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Fe(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=nn()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Uh(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ie}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ne}:await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ie})})}catch(r){if(T(r))return pa(r)&&(await this._removeSession(),await G(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new ne;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await rt(this.storage,this.storageKey));const{data:l,error:u}=await P(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:Ie});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await G(this.storage,`${this.storageKey}-code-verifier`),T(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ne;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=rn(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(T(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new ne;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!J())throw new xt("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new jn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xt("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new jn("No code detected.");const{data:b,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new xt("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let d=u+h;c&&(d=parseInt(c));const f=d-u;f*1e3<=ot&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const p=d-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,u);const{data:g,error:m}=await this._getUser(i);if(m)throw m;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:d,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(n){if(T(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Fe(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(fa(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await G(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=kh(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await rt(this.storage,this.storageKey,!0));try{return await P(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await G(this.storage,`${this.storageKey}-code-verifier`),T(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:h,error:d}=i;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await P(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return J()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(T(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:c,access_token:l,nonce:u}=e,h=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:c,access_token:l,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:pe}),{data:d,error:f}=h;return f?this._returnResult({data:{user:null,session:null},error:f}):!d||!d.session||!d.user?this._returnResult({data:{user:null,session:null},error:new Me}):(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:f}))}catch(s){if(await G(this.storage,`${this.storageKey}-code-verifier`),T(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await P(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Ah(async s=>(s>0&&await Oh(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await P(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:pe})),(s,i)=>{const o=200*Math.pow(2,s);return i&&fr(i)&&Date.now()+o-n<ot})}catch(n){if(this._debug(r,"error",n),T(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),J()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Fe(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Fe(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await at(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o?.user)!==null&&e!==void 0?e:nn()}else if(s&&!s.user&&!s.user){const o=await Fe(this.storage,this.storageKey+"-user");o&&o?.user?(s.user=o.user,await G(this.storage,this.storageKey+"-user"),await at(this.storage,this.storageKey,s)):s.user=nn()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<tn;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${tn}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),fr(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&o?.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new ne;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Fr;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ne;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),T(i)){const o={data:null,error:i};return fr(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await G(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await at(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=ei(s);await at(this.storage,this.storageKey,i)}else{const s=ei(r);await at(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await G(this.storage,this.storageKey),await G(this.storage,this.storageKey+"-code-verifier"),await G(this.storage,this.storageKey+"-user"),this.userStorage&&await G(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&J()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ot);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/ot);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ot}ms, refresh threshold is ${Pn} ticks`),s<=Pn&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof es)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!J()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await rt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await P(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:l}=await P(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(e.factorType==="totp"&&c.type==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?td(e.webauthn.credential_response):rd(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:c}=await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:c}))})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Xh(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:ed(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r?.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=rn(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const l=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:l},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await P(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ne})})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new ne});const o=await P(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&J()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(T(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new ne});const o=await P(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&J()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(T(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await P(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ne})})}catch(e){if(T(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await P(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ne})})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+ph>s)return n;const{data:i,error:o}=await P(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:f,error:p}=await this.getSession();if(p||!f.session)return this._returnResult({data:null,error:p});n=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=rn(n);r?.allowExpired||$h(i.exp);const l=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!l){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const u=Ih(s.alg),h=await crypto.subtle.importKey("jwk",l,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,wh(`${a}.${c}`)))throw new Sr("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(T(n))return this._returnResult({data:null,error:n});throw n}}};ts.nextInstanceID={};const hd=Xn,dd=ts,fd=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:hd,AuthApiError:da,AuthClient:dd,AuthError:mt,AuthImplicitGrantRedirectError:xt,AuthInvalidCredentialsError:Tt,AuthInvalidJwtError:Sr,AuthInvalidTokenResponseError:Me,AuthPKCEGrantCodeExchangeError:jn,AuthRetryableFetchError:Er,AuthSessionMissingError:ne,AuthUnknownError:$e,AuthWeakPasswordError:$n,CustomAuthError:Ce,GoTrueAdminApi:Xn,GoTrueClient:ts,NavigatorLockAcquireTimeoutError:ba,SIGN_OUT_SCOPES:pr,isAuthApiError:fa,isAuthError:T,isAuthImplicitGrantRedirectError:ga,isAuthRetryableFetchError:fr,isAuthSessionMissingError:pa,isAuthWeakPasswordError:gh,lockInternals:qe,navigatorLock:wa,processLock:Vh},Symbol.toStringTag,{value:"Module"})),Ea=zt(fd);var ci;function pd(){if(ci)return At;ci=1,Object.defineProperty(At,"__esModule",{value:!0}),At.SupabaseAuthClient=void 0;const t=Ea;let e=class extends t.AuthClient{constructor(n){super(n)}};return At.SupabaseAuthClient=e,At}var li;function ui(){if(li)return Jt;li=1,Object.defineProperty(Jt,"__esModule",{value:!0});const t=Do,e=Mo(),r=Jo,n=ih,s=ah(),i=ch(),o=lh(),a=pd();class c{constructor(u,h,d){var f,p,g;this.supabaseUrl=u,this.supabaseKey=h;const m=(0,o.validateSupabaseUrl)(u);if(!h)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const v=`sb-${m.hostname.split(".")[0]}-auth-token`,b={db:s.DEFAULT_DB_OPTIONS,realtime:s.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},s.DEFAULT_AUTH_OPTIONS),{storageKey:v}),global:s.DEFAULT_GLOBAL_OPTIONS},y=(0,o.applySettingDefaults)(d??{},b);this.storageKey=(f=y.auth.storageKey)!==null&&f!==void 0?f:"",this.headers=(p=y.global.headers)!==null&&p!==void 0?p:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(_,k)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(k)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((g=y.auth)!==null&&g!==void 0?g:{},this.headers,y.global.fetch),this.fetch=(0,i.fetchWithAuth)(h,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&this.accessToken().then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new e.PostgrestClient(new URL("rest/v1",m).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new n.StorageClient(this.storageUrl.href,this.headers,this.fetch,d?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new t.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(u){return this.rest.from(u)}schema(u){return this.rest.schema(u)}rpc(u,h={},d={head:!1,get:!1,count:void 0}){return this.rest.rpc(u,h,d)}channel(u,h={config:{}}){return this.realtime.channel(u,h)}getChannels(){return this.realtime.getChannels()}removeChannel(u){return this.realtime.removeChannel(u)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var u,h;if(this.accessToken)return await this.accessToken();const{data:d}=await this.auth.getSession();return(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:u,persistSession:h,detectSessionInUrl:d,storage:f,userStorage:p,storageKey:g,flowType:m,lock:v,debug:b,throwOnError:y},_,k){const R={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new a.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},R),_),storageKey:g,autoRefreshToken:u,persistSession:h,detectSessionInUrl:d,storage:f,userStorage:p,flowType:m,lock:v,debug:b,throwOnError:y,fetch:k,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(u){return new r.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},u),{params:Object.assign({apikey:this.supabaseKey},u?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((h,d)=>{this._handleTokenChanged(h,"CLIENT",d?.access_token)})}_handleTokenChanged(u,h,d){(u==="TOKEN_REFRESHED"||u==="SIGNED_IN")&&this.changedAccessToken!==d?(this.changedAccessToken=d,this.realtime.setAuth(d)):u==="SIGNED_OUT"&&(this.realtime.setAuth(),h=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Jt.default=c,Jt}var hi;function gd(){return hi||(hi=1,(function(t){var e=Te&&Te.__createBinding||(Object.create?(function(u,h,d,f){f===void 0&&(f=d);var p=Object.getOwnPropertyDescriptor(h,d);(!p||("get"in p?!h.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(u,f,p)}):(function(u,h,d,f){f===void 0&&(f=d),u[f]=h[d]})),r=Te&&Te.__exportStar||function(u,h){for(var d in u)d!=="default"&&!Object.prototype.hasOwnProperty.call(h,d)&&e(h,u,d)},n=Te&&Te.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const s=n(ui());r(Ea,t);var i=Mo();Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return i.PostgrestError}});var o=Do;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),r(Jo,t);var a=ui();Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return n(a).default}});const c=(u,h,d)=>new s.default(u,h,d);t.createClient=c;function l(){if(typeof window<"u"||typeof process>"u")return!1;const u=process.version;if(u==null)return!1;const h=u.match(/^v(\d+)\./);return h?parseInt(h[1],10)<=18:!1}l()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Te)),Te}var Sa=gd();const Oa=Ga(Sa),md=Ha({__proto__:null,default:Oa},[Sa]),{PostgrestError:cv,FunctionsHttpError:lv,FunctionsFetchError:uv,FunctionsRelayError:hv,FunctionsError:dv,FunctionRegion:fv,SupabaseClient:pv,createClient:gv,GoTrueAdminApi:mv,GoTrueClient:vv,AuthAdminApi:yv,AuthClient:bv,navigatorLock:wv,NavigatorLockAcquireTimeoutError:_v,lockInternals:kv,processLock:Ev,SIGN_OUT_SCOPES:Sv,AuthError:Ov,AuthApiError:Av,AuthUnknownError:Tv,CustomAuthError:xv,AuthSessionMissingError:Rv,AuthInvalidTokenResponseError:Pv,AuthInvalidCredentialsError:Cv,AuthImplicitGrantRedirectError:jv,AuthPKCEGrantCodeExchangeError:$v,AuthRetryableFetchError:Iv,AuthWeakPasswordError:Dv,AuthInvalidJwtError:Uv,isAuthError:zv,isAuthApiError:Nv,isAuthSessionMissingError:Lv,isAuthImplicitGrantRedirectError:Fv,isAuthRetryableFetchError:Mv,isAuthWeakPasswordError:Bv,RealtimePresence:qv,RealtimeChannel:Vv,RealtimeClient:Zv,REALTIME_LISTEN_TYPES:Wv,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:Kv,REALTIME_PRESENCE_LISTEN_EVENTS:Hv,REALTIME_SUBSCRIBE_STATES:Gv,REALTIME_CHANNEL_STATES:Jv}=Oa||md;function sn(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function vd(t,e){var r=Ke.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var yd=typeof window<"u"?Ke.useLayoutEffect:Ke.useEffect,di=new WeakMap;function Qv(t,e){var r=vd(null,function(n){return t.forEach(function(s){return sn(s,n)})});return yd(function(){var n=di.get(r);if(n){var s=new Set(n),i=new Set(t),o=r.current;s.forEach(function(a){i.has(a)||sn(a,null)}),i.forEach(function(a){s.has(a)||sn(a,o)})}di.set(r,t)},[t]),r}function bd(t){return t}function wd(t,e){e===void 0&&(e=bd);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=e(i,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(a){return i(a)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},l=function(){return Promise.resolve().then(c)};l(),r={push:function(u){o.push(u),l()},filter:function(u){return o=o.filter(u),r}}}};return s}function Yv(t){t===void 0&&(t={});var e=wd(null);return e.options=pt({async:!0,ssr:!1},t),e}var Aa=function(t){var e=t.sideCar,r=Qe(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return Ke.createElement(n,pt({},r))};Aa.isSideCarExport=!0;function Xv(t,e){return t.useMedium(e),Aa}var ey=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__},_d=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},it=new WeakMap,ir=new WeakMap,or={},on=0,Ta=function(t){return t&&(t.host||Ta(t.parentNode))},kd=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=Ta(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},Ed=function(t,e,r,n){var s=kd(e,Array.isArray(t)?t:[t]);or[r]||(or[r]=new WeakMap);var i=or[r],o=[],a=new Set,c=new Set(s),l=function(h){!h||a.has(h)||(a.add(h),l(h.parentNode))};s.forEach(l);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(d){if(a.has(d))u(d);else try{var f=d.getAttribute(n),p=f!==null&&f!=="false",g=(it.get(d)||0)+1,m=(i.get(d)||0)+1;it.set(d,g),i.set(d,m),o.push(d),g===1&&p&&ir.set(d,!0),m===1&&d.setAttribute(r,"true"),p||d.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",d,v)}})};return u(e),a.clear(),on++,function(){o.forEach(function(h){var d=it.get(h)-1,f=i.get(h)-1;it.set(h,d),i.set(h,f),d||(ir.has(h)||h.removeAttribute(n),ir.delete(h)),f||h.removeAttribute(r)}),on--,on||(it=new WeakMap,it=new WeakMap,ir=new WeakMap,or={})}},ty=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=_d(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),Ed(n,s,r,"aria-hidden")):function(){return null}},an={exports:{}},cn={};var fi;function Sd(){if(fi)return cn;fi=1;var t=Ka();function e(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,s=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function a(h,d){var f=d(),p=n({inst:{value:f,getSnapshot:d}}),g=p[0].inst,m=p[1];return i(function(){g.value=f,g.getSnapshot=d,c(g)&&m({inst:g})},[h,f,d]),s(function(){return c(g)&&m({inst:g}),h(function(){c(g)&&m({inst:g})})},[h]),o(f),f}function c(h){var d=h.getSnapshot;h=h.value;try{var f=d();return!r(h,f)}catch{return!0}}function l(h,d){return d()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:a;return cn.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,cn}var pi;function Od(){return pi||(pi=1,an.exports=Sd()),an.exports}var ry=Od();function ny(t,[e,r]){return Math.min(r,Math.max(e,t))}function w(t,e,r){function n(a,c){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:c,constr:o,traits:new Set},enumerable:!1}),a._zod.traits.has(t))return;a._zod.traits.add(t),e(a,c);const l=o.prototype,u=Object.keys(l);for(let h=0;h<u.length;h++){const d=u[h];d in a||(a[d]=l[d].bind(a))}}const s=r?.Parent??Object;class i extends s{}Object.defineProperty(i,"name",{value:t});function o(a){var c;const l=r?.Parent?new i:this;n(l,a),(c=l._zod).deferred??(c.deferred=[]);for(const u of l._zod.deferred)u();return l}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>r?.Parent&&a instanceof r.Parent?!0:a?._zod?.traits?.has(t)}),Object.defineProperty(o,"name",{value:t}),o}class dt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class xa extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const Ra={};function Ge(t){return Ra}function Ad(t){const e=Object.values(t).filter(n=>typeof n=="number");return Object.entries(t).filter(([n,s])=>e.indexOf(+n)===-1).map(([n,s])=>s)}function Dn(t,e){return typeof e=="bigint"?e.toString():e}function rs(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function ns(t){return t==null}function ss(t){const e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}const gi=Symbol("evaluating");function U(t,e,r){let n;Object.defineProperty(t,e,{get(){if(n!==gi)return n===void 0&&(n=gi,n=r()),n},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Ye(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Xe(...t){const e={};for(const r of t){const n=Object.getOwnPropertyDescriptors(r);Object.assign(e,n)}return Object.defineProperties({},e)}function mi(t){return JSON.stringify(t)}function Td(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Pa="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function xr(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const xd=rs(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Dt(t){if(xr(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const r=e.prototype;return!(xr(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Ca(t){return Dt(t)?{...t}:Array.isArray(t)?[...t]:t}const Rd=new Set(["string","number","symbol"]);function Mr(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ze(t,e,r){const n=new t._zod.constr(e??t._zod.def);return(!e||r?.parent)&&(n._zod.parent=t),n}function C(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Pd(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function Cd(t,e){const r=t._zod.def,n=Xe(t._zod.def,{get shape(){const s={};for(const i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(s[i]=r.shape[i])}return Ye(this,"shape",s),s},checks:[]});return ze(t,n)}function jd(t,e){const r=t._zod.def,n=Xe(t._zod.def,{get shape(){const s={...t._zod.def.shape};for(const i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete s[i]}return Ye(this,"shape",s),s},checks:[]});return ze(t,n)}function $d(t,e){if(!Dt(e))throw new Error("Invalid input to extend: expected a plain object");const r=t._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=Xe(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return Ye(this,"shape",i),i},checks:[]});return ze(t,s)}function Id(t,e){if(!Dt(e))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...t._zod.def,get shape(){const n={...t._zod.def.shape,...e};return Ye(this,"shape",n),n},checks:t._zod.def.checks};return ze(t,r)}function Dd(t,e){const r=Xe(t._zod.def,{get shape(){const n={...t._zod.def.shape,...e._zod.def.shape};return Ye(this,"shape",n),n},get catchall(){return e._zod.def.catchall},checks:[]});return ze(t,r)}function Ud(t,e,r){const n=Xe(e._zod.def,{get shape(){const s=e._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=t?new t({type:"optional",innerType:s[o]}):s[o])}else for(const o in s)i[o]=t?new t({type:"optional",innerType:s[o]}):s[o];return Ye(this,"shape",i),i},checks:[]});return ze(e,n)}function zd(t,e,r){const n=Xe(e._zod.def,{get shape(){const s=e._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new t({type:"nonoptional",innerType:s[o]}))}else for(const o in s)i[o]=new t({type:"nonoptional",innerType:s[o]});return Ye(this,"shape",i),i},checks:[]});return ze(e,n)}function ct(t,e=0){if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}function ja(t,e){return e.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(t),r})}function ar(t){return typeof t=="string"?t:t?.message}function Je(t,e,r){const n={...t,path:t.path??[]};if(!t.message){const s=ar(t.inst?._zod.def?.error?.(t))??ar(e?.error?.(t))??ar(r.customError?.(t))??ar(r.localeError?.(t))??"Invalid input";n.message=s}return delete n.inst,delete n.continue,e?.reportInput||delete n.input,n}function is(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Ut(...t){const[e,r,n]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:n}:{...e}}const $a=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Dn,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Ia=w("$ZodError",$a),Da=w("$ZodError",$a,{Parent:Error});function Nd(t,e=r=>r.message){const r={},n=[];for(const s of t.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}function Ld(t,e=r=>r.message){const r={_errors:[]},n=s=>{for(const i of s.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(o=>n({issues:o}));else if(i.code==="invalid_key")n({issues:i.issues});else if(i.code==="invalid_element")n({issues:i.issues});else if(i.path.length===0)r._errors.push(e(i));else{let o=r,a=0;for(;a<i.path.length;){const c=i.path[a];a===i.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(e(i))):o[c]=o[c]||{_errors:[]},o=o[c],a++}}};return n(t),r}const os=t=>(e,r,n,s)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=e._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new dt;if(o.issues.length){const a=new(s?.Err??t)(o.issues.map(c=>Je(c,i,Ge())));throw Pa(a,s?.callee),a}return o.value},as=t=>async(e,r,n,s)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=e._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new(s?.Err??t)(o.issues.map(c=>Je(c,i,Ge())));throw Pa(a,s?.callee),a}return o.value},Br=t=>(e,r,n)=>{const s=n?{...n,async:!1}:{async:!1},i=e._zod.run({value:r,issues:[]},s);if(i instanceof Promise)throw new dt;return i.issues.length?{success:!1,error:new(t??Ia)(i.issues.map(o=>Je(o,s,Ge())))}:{success:!0,data:i.value}},Fd=Br(Da),qr=t=>async(e,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=e._zod.run({value:r,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(o=>Je(o,s,Ge())))}:{success:!0,data:i.value}},Md=qr(Da),Bd=t=>(e,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return os(t)(e,r,s)},qd=t=>(e,r,n)=>os(t)(e,r,n),Vd=t=>async(e,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return as(t)(e,r,s)},Zd=t=>async(e,r,n)=>as(t)(e,r,n),Wd=t=>(e,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Br(t)(e,r,s)},Kd=t=>(e,r,n)=>Br(t)(e,r,n),Hd=t=>async(e,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return qr(t)(e,r,s)},Gd=t=>async(e,r,n)=>qr(t)(e,r,n),Jd=/^[cC][^\s-]{8,}$/,Qd=/^[0-9a-z]+$/,Yd=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Xd=/^[0-9a-vA-V]{20}$/,ef=/^[A-Za-z0-9]{27}$/,tf=/^[a-zA-Z0-9_-]{21}$/,rf=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,nf=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,vi=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,sf=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,of="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function af(){return new RegExp(of,"u")}const cf=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lf=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,uf=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,hf=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,df=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Ua=/^[A-Za-z0-9_-]*$/,ff=/^\+(?:[0-9]){6,14}[0-9]$/,za="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",pf=new RegExp(`^${za}$`);function Na(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function gf(t){return new RegExp(`^${Na(t)}$`)}function mf(t){const e=Na({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${e}(?:${r.join("|")})`;return new RegExp(`^${za}T(?:${n})$`)}const vf=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},yf=/^[^A-Z]*$/,bf=/^[^a-z]*$/,Oe=w("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),wf=w("$ZodCheckMaxLength",(t,e)=>{var r;Oe.init(t,e),(r=t._zod.def).when??(r.when=n=>{const s=n.value;return!ns(s)&&s.length!==void 0}),t._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{const s=n.value;if(s.length<=e.maximum)return;const o=is(s);n.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),_f=w("$ZodCheckMinLength",(t,e)=>{var r;Oe.init(t,e),(r=t._zod.def).when??(r.when=n=>{const s=n.value;return!ns(s)&&s.length!==void 0}),t._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{const s=n.value;if(s.length>=e.minimum)return;const o=is(s);n.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),kf=w("$ZodCheckLengthEquals",(t,e)=>{var r;Oe.init(t,e),(r=t._zod.def).when??(r.when=n=>{const s=n.value;return!ns(s)&&s.length!==void 0}),t._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=n=>{const s=n.value,i=s.length;if(i===e.length)return;const o=is(s),a=i>e.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),Vr=w("$ZodCheckStringFormat",(t,e)=>{var r,n;Oe.init(t,e),t._zod.onattach.push(s=>{const i=s._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(n=t._zod).check??(n.check=()=>{})}),Ef=w("$ZodCheckRegex",(t,e)=>{Vr.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Sf=w("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=yf),Vr.init(t,e)}),Of=w("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=bf),Vr.init(t,e)}),Af=w("$ZodCheckIncludes",(t,e)=>{Oe.init(t,e);const r=Mr(e.includes),n=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=n,t._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),Tf=w("$ZodCheckStartsWith",(t,e)=>{Oe.init(t,e);const r=new RegExp(`^${Mr(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),t._zod.check=n=>{n.value.startsWith(e.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:n.value,inst:t,continue:!e.abort})}}),xf=w("$ZodCheckEndsWith",(t,e)=>{Oe.init(t,e);const r=new RegExp(`.*${Mr(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),t._zod.check=n=>{n.value.endsWith(e.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:n.value,inst:t,continue:!e.abort})}}),Rf=w("$ZodCheckOverwrite",(t,e)=>{Oe.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});class Pf{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const n=e.split(`
`).filter(o=>o),s=Math.min(...n.map(o=>o.length-o.trimStart().length)),i=n.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=Function,r=this?.args,s=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...r,s.join(`
`))}}const Cf={major:4,minor:1,patch:13},W=w("$ZodType",(t,e)=>{var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=Cf;const n=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&n.unshift(t);for(const s of n)for(const i of s._zod.onattach)i(t);if(n.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(o,a,c)=>{let l=ct(o),u;for(const h of a){if(h._zod.def.when){if(!h._zod.def.when(o))continue}else if(l)continue;const d=o.issues.length,f=h._zod.check(o);if(f instanceof Promise&&c?.async===!1)throw new dt;if(u||f instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await f,o.issues.length!==d&&(l||(l=ct(o,d)))});else{if(o.issues.length===d)continue;l||(l=ct(o,d))}}return u?u.then(()=>o):o},i=(o,a,c)=>{if(ct(o))return o.aborted=!0,o;const l=s(a,n,c);if(l instanceof Promise){if(c.async===!1)throw new dt;return l.then(u=>t._zod.parse(u,c))}return t._zod.parse(l,c)};t._zod.run=(o,a)=>{if(a.skipChecks)return t._zod.parse(o,a);if(a.direction==="backward"){const l=t._zod.parse({value:o.value,issues:[]},{...a,skipChecks:!0});return l instanceof Promise?l.then(u=>i(u,o,a)):i(l,o,a)}const c=t._zod.parse(o,a);if(c instanceof Promise){if(a.async===!1)throw new dt;return c.then(l=>s(l,n,a))}return s(c,n,a)}}t["~standard"]={validate:s=>{try{const i=Fd(t,s);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return Md(t,s).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}}),cs=w("$ZodString",(t,e)=>{W.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??vf(t._zod.bag),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),N=w("$ZodStringFormat",(t,e)=>{Vr.init(t,e),cs.init(t,e)}),jf=w("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=nf),N.init(t,e)}),$f=w("$ZodUUID",(t,e)=>{if(e.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(n===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=vi(n))}else e.pattern??(e.pattern=vi());N.init(t,e)}),If=w("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=sf),N.init(t,e)}),Df=w("$ZodURL",(t,e)=>{N.init(t,e),t._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),Uf=w("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=af()),N.init(t,e)}),zf=w("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=tf),N.init(t,e)}),Nf=w("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=Jd),N.init(t,e)}),Lf=w("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=Qd),N.init(t,e)}),Ff=w("$ZodULID",(t,e)=>{e.pattern??(e.pattern=Yd),N.init(t,e)}),Mf=w("$ZodXID",(t,e)=>{e.pattern??(e.pattern=Xd),N.init(t,e)}),Bf=w("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=ef),N.init(t,e)}),qf=w("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=mf(e)),N.init(t,e)}),Vf=w("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=pf),N.init(t,e)}),Zf=w("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=gf(e)),N.init(t,e)}),Wf=w("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=rf),N.init(t,e)}),Kf=w("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=cf),N.init(t,e),t._zod.bag.format="ipv4"}),Hf=w("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=lf),N.init(t,e),t._zod.bag.format="ipv6",t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),Gf=w("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=uf),N.init(t,e)}),Jf=w("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=hf),N.init(t,e),t._zod.check=r=>{const n=r.value.split("/");try{if(n.length!==2)throw new Error;const[s,i]=n;if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function La(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Qf=w("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=df),N.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=r=>{La(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function Yf(t){if(!Ua.test(t))return!1;const e=t.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return La(r)}const Xf=w("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=Ua),N.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=r=>{Yf(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),ep=w("$ZodE164",(t,e)=>{e.pattern??(e.pattern=ff),N.init(t,e)});function tp(t,e=null){try{const r=t.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const rp=w("$ZodJWT",(t,e)=>{N.init(t,e),t._zod.check=r=>{tp(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),np=w("$ZodUnknown",(t,e)=>{W.init(t,e),t._zod.parse=r=>r}),sp=w("$ZodNever",(t,e)=>{W.init(t,e),t._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)});function yi(t,e,r){t.issues.length&&e.issues.push(...ja(r,t.issues)),e.value[r]=t.value}const ip=w("$ZodArray",(t,e)=>{W.init(t,e),t._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),r;r.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],c=e.element._zod.run({value:a,issues:[]},n);c instanceof Promise?i.push(c.then(l=>yi(l,r,o))):yi(c,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function Rr(t,e,r,n){t.issues.length&&e.issues.push(...ja(r,t.issues)),t.value===void 0?r in n&&(e.value[r]=void 0):e.value[r]=t.value}function Fa(t){const e=Object.keys(t.shape);for(const n of e)if(!t.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const r=Pd(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}}function Ma(t,e,r,n,s,i){const o=[],a=s.keySet,c=s.catchall._zod,l=c.def.type;for(const u in e){if(a.has(u))continue;if(l==="never"){o.push(u);continue}const h=c.run({value:e[u],issues:[]},n);h instanceof Promise?t.push(h.then(d=>Rr(d,r,u,e))):Rr(h,r,u,e)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:e,inst:i}),t.length?Promise.all(t).then(()=>r):r}const op=w("$ZodObject",(t,e)=>{if(W.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const a=e.shape;Object.defineProperty(e,"shape",{get:()=>{const c={...a};return Object.defineProperty(e,"shape",{value:c}),c}})}const n=rs(()=>Fa(e));U(t._zod,"propValues",()=>{const a=e.shape,c={};for(const l in a){const u=a[l]._zod;if(u.values){c[l]??(c[l]=new Set);for(const h of u.values)c[l].add(h)}}return c});const s=xr,i=e.catchall;let o;t._zod.parse=(a,c)=>{o??(o=n.value);const l=a.value;if(!s(l))return a.issues.push({expected:"object",code:"invalid_type",input:l,inst:t}),a;a.value={};const u=[],h=o.shape;for(const d of o.keys){const p=h[d]._zod.run({value:l[d],issues:[]},c);p instanceof Promise?u.push(p.then(g=>Rr(g,a,d,l))):Rr(p,a,d,l)}return i?Ma(u,l,a,c,n.value,t):u.length?Promise.all(u).then(()=>a):a}}),ap=w("$ZodObjectJIT",(t,e)=>{op.init(t,e);const r=t._zod.parse,n=rs(()=>Fa(e)),s=d=>{const f=new Pf(["shape","payload","ctx"]),p=n.value,g=y=>{const _=mi(y);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`};f.write("const input = payload.value;");const m=Object.create(null);let v=0;for(const y of p.keys)m[y]=`key_${v++}`;f.write("const newResult = {};");for(const y of p.keys){const _=m[y],k=mi(y);f.write(`const ${_} = ${g(y)};`),f.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${k}, ...iss.path] : [${k}]
          })));
        }
        
        
        if (${_}.value === undefined) {
          if (${k} in input) {
            newResult[${k}] = undefined;
          }
        } else {
          newResult[${k}] = ${_}.value;
        }
        
      `)}f.write("payload.value = newResult;"),f.write("return payload;");const b=f.compile();return(y,_)=>b(d,y,_)};let i;const o=xr,a=!Ra.jitless,l=a&&xd.value,u=e.catchall;let h;t._zod.parse=(d,f)=>{h??(h=n.value);const p=d.value;return o(p)?a&&l&&f?.async===!1&&f.jitless!==!0?(i||(i=s(e.shape)),d=i(d,f),u?Ma([],p,d,f,h,t):d):r(d,f):(d.issues.push({expected:"object",code:"invalid_type",input:p,inst:t}),d)}});function bi(t,e,r,n){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;const s=t.filter(i=>!ct(i));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(i=>i.issues.map(o=>Je(o,n,Ge())))}),e)}const cp=w("$ZodUnion",(t,e)=>{W.init(t,e),U(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),U(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),U(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),U(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${s.map(i=>ss(i.source)).join("|")})$`)}});const r=e.options.length===1,n=e.options[0]._zod.run;t._zod.parse=(s,i)=>{if(r)return n(s,i);let o=!1;const a=[];for(const c of e.options){const l=c._zod.run({value:s.value,issues:[]},i);if(l instanceof Promise)a.push(l),o=!0;else{if(l.issues.length===0)return l;a.push(l)}}return o?Promise.all(a).then(c=>bi(c,s,t,i)):bi(a,s,t,i)}}),lp=w("$ZodIntersection",(t,e)=>{W.init(t,e),t._zod.parse=(r,n)=>{const s=r.value,i=e.left._zod.run({value:s,issues:[]},n),o=e.right._zod.run({value:s,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([c,l])=>wi(r,c,l)):wi(r,i,o)}});function Un(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Dt(t)&&Dt(e)){const r=Object.keys(e),n=Object.keys(t).filter(i=>r.indexOf(i)!==-1),s={...t,...e};for(const i of n){const o=Un(t[i],e[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<t.length;n++){const s=t[n],i=e[n],o=Un(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function wi(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),ct(t))return t;const n=Un(e.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return t.value=n.data,t}const up=w("$ZodEnum",(t,e)=>{W.init(t,e);const r=Ad(e.entries),n=new Set(r);t._zod.values=n,t._zod.pattern=new RegExp(`^(${r.filter(s=>Rd.has(typeof s)).map(s=>typeof s=="string"?Mr(s):s.toString()).join("|")})$`),t._zod.parse=(s,i)=>{const o=s.value;return n.has(o)||s.issues.push({code:"invalid_value",values:r,input:o,inst:t}),s}}),hp=w("$ZodTransform",(t,e)=>{W.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new xa(t.constructor.name);const s=e.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(r.value=o,r));if(s instanceof Promise)throw new dt;return r.value=s,r}});function _i(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const dp=w("$ZodOptional",(t,e)=>{W.init(t,e),t._zod.optin="optional",t._zod.optout="optional",U(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),U(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${ss(r.source)})?$`):void 0}),t._zod.parse=(r,n)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>_i(i,r.value)):_i(s,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,n)}}),fp=w("$ZodNullable",(t,e)=>{W.init(t,e),U(t._zod,"optin",()=>e.innerType._zod.optin),U(t._zod,"optout",()=>e.innerType._zod.optout),U(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${ss(r.source)}|null)$`):void 0}),U(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,n)=>r.value===null?r:e.innerType._zod.run(r,n)}),pp=w("$ZodDefault",(t,e)=>{W.init(t,e),t._zod.optin="optional",U(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);if(r.value===void 0)return r.value=e.defaultValue,r;const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>ki(i,e)):ki(s,e)}});function ki(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const gp=w("$ZodPrefault",(t,e)=>{W.init(t,e),t._zod.optin="optional",U(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,n))}),mp=w("$ZodNonOptional",(t,e)=>{W.init(t,e),U(t._zod,"values",()=>{const r=e.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),t._zod.parse=(r,n)=>{const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>Ei(i,t)):Ei(s,t)}});function Ei(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const vp=w("$ZodCatch",(t,e)=>{W.init(t,e),U(t._zod,"optin",()=>e.innerType._zod.optin),U(t._zod,"optout",()=>e.innerType._zod.optout),U(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>(r.value=i.value,i.issues.length&&(r.value=e.catchValue({...r,error:{issues:i.issues.map(o=>Je(o,n,Ge()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=e.catchValue({...r,error:{issues:s.issues.map(i=>Je(i,n,Ge()))},input:r.value}),r.issues=[]),r)}}),yp=w("$ZodPipe",(t,e)=>{W.init(t,e),U(t._zod,"values",()=>e.in._zod.values),U(t._zod,"optin",()=>e.in._zod.optin),U(t._zod,"optout",()=>e.out._zod.optout),U(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{if(n.direction==="backward"){const i=e.out._zod.run(r,n);return i instanceof Promise?i.then(o=>cr(o,e.in,n)):cr(i,e.in,n)}const s=e.in._zod.run(r,n);return s instanceof Promise?s.then(i=>cr(i,e.out,n)):cr(s,e.out,n)}});function cr(t,e,r){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},r)}const bp=w("$ZodReadonly",(t,e)=>{W.init(t,e),U(t._zod,"propValues",()=>e.innerType._zod.propValues),U(t._zod,"values",()=>e.innerType._zod.values),U(t._zod,"optin",()=>e.innerType?._zod?.optin),U(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(Si):Si(s)}});function Si(t){return t.value=Object.freeze(t.value),t}const wp=w("$ZodCustom",(t,e)=>{Oe.init(t,e),W.init(t,e),t._zod.parse=(r,n)=>r,t._zod.check=r=>{const n=r.value,s=e.fn(n);if(s instanceof Promise)return s.then(i=>Oi(i,r,n,t));Oi(s,r,n,t)}});function Oi(t,e,r,n){if(!t){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),e.issues.push(Ut(s))}}var Ai;class _p{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...r){const n=r[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){const r=e._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function kp(){return new _p}(Ai=globalThis).__zod_globalRegistry??(Ai.__zod_globalRegistry=kp());const lr=globalThis.__zod_globalRegistry;function Ep(t,e){return new t({type:"string",...C(e)})}function Sp(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...C(e)})}function Ti(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...C(e)})}function Op(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...C(e)})}function Ap(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...C(e)})}function Tp(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...C(e)})}function xp(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...C(e)})}function Rp(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...C(e)})}function Pp(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...C(e)})}function Cp(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...C(e)})}function jp(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...C(e)})}function $p(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...C(e)})}function Ip(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...C(e)})}function Dp(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...C(e)})}function Up(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...C(e)})}function zp(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...C(e)})}function Np(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...C(e)})}function Lp(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...C(e)})}function Fp(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...C(e)})}function Mp(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...C(e)})}function Bp(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...C(e)})}function qp(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...C(e)})}function Vp(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...C(e)})}function Zp(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...C(e)})}function Wp(t,e){return new t({type:"string",format:"date",check:"string_format",...C(e)})}function Kp(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...C(e)})}function Hp(t,e){return new t({type:"string",format:"duration",check:"string_format",...C(e)})}function Gp(t){return new t({type:"unknown"})}function Jp(t,e){return new t({type:"never",...C(e)})}function Ba(t,e){return new wf({check:"max_length",...C(e),maximum:t})}function Pr(t,e){return new _f({check:"min_length",...C(e),minimum:t})}function qa(t,e){return new kf({check:"length_equals",...C(e),length:t})}function Qp(t,e){return new Ef({check:"string_format",format:"regex",...C(e),pattern:t})}function Yp(t){return new Sf({check:"string_format",format:"lowercase",...C(t)})}function Xp(t){return new Of({check:"string_format",format:"uppercase",...C(t)})}function eg(t,e){return new Af({check:"string_format",format:"includes",...C(e),includes:t})}function tg(t,e){return new Tf({check:"string_format",format:"starts_with",...C(e),prefix:t})}function rg(t,e){return new xf({check:"string_format",format:"ends_with",...C(e),suffix:t})}function kt(t){return new Rf({check:"overwrite",tx:t})}function ng(t){return kt(e=>e.normalize(t))}function sg(){return kt(t=>t.trim())}function ig(){return kt(t=>t.toLowerCase())}function og(){return kt(t=>t.toUpperCase())}function ag(){return kt(t=>Td(t))}function cg(t,e,r){return new t({type:"array",element:e,...C(r)})}function lg(t,e,r){return new t({type:"custom",check:"custom",fn:e,...C(r)})}function ug(t){const e=hg(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Ut(n,r.value,e._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),r.issues.push(Ut(s))}},t(r.value,r)));return e}function hg(t,e){const r=new Oe({check:"custom",...C(e)});return r._zod.check=t,r}const dg=w("ZodISODateTime",(t,e)=>{qf.init(t,e),L.init(t,e)});function fg(t){return Zp(dg,t)}const pg=w("ZodISODate",(t,e)=>{Vf.init(t,e),L.init(t,e)});function gg(t){return Wp(pg,t)}const mg=w("ZodISOTime",(t,e)=>{Zf.init(t,e),L.init(t,e)});function vg(t){return Kp(mg,t)}const yg=w("ZodISODuration",(t,e)=>{Wf.init(t,e),L.init(t,e)});function bg(t){return Hp(yg,t)}const wg=(t,e)=>{Ia.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>Ld(t,r)},flatten:{value:r=>Nd(t,r)},addIssue:{value:r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,Dn,2)}},addIssues:{value:r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,Dn,2)}},isEmpty:{get(){return t.issues.length===0}}})},ue=w("ZodError",wg,{Parent:Error}),_g=os(ue),kg=as(ue),Eg=Br(ue),Sg=qr(ue),Og=Bd(ue),Ag=qd(ue),Tg=Vd(ue),xg=Zd(ue),Rg=Wd(ue),Pg=Kd(ue),Cg=Hd(ue),jg=Gd(ue),H=w("ZodType",(t,e)=>(W.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone(Xe(e,{checks:[...e.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]})),t.clone=(r,n)=>ze(t,r,n),t.brand=()=>t,t.register=((r,n)=>(r.add(t,n),t)),t.parse=(r,n)=>_g(t,r,n,{callee:t.parse}),t.safeParse=(r,n)=>Eg(t,r,n),t.parseAsync=async(r,n)=>kg(t,r,n,{callee:t.parseAsync}),t.safeParseAsync=async(r,n)=>Sg(t,r,n),t.spa=t.safeParseAsync,t.encode=(r,n)=>Og(t,r,n),t.decode=(r,n)=>Ag(t,r,n),t.encodeAsync=async(r,n)=>Tg(t,r,n),t.decodeAsync=async(r,n)=>xg(t,r,n),t.safeEncode=(r,n)=>Rg(t,r,n),t.safeDecode=(r,n)=>Pg(t,r,n),t.safeEncodeAsync=async(r,n)=>Cg(t,r,n),t.safeDecodeAsync=async(r,n)=>jg(t,r,n),t.refine=(r,n)=>t.check(km(r,n)),t.superRefine=r=>t.check(Em(r)),t.overwrite=r=>t.check(kt(r)),t.optional=()=>Pi(t),t.nullable=()=>Ci(t),t.nullish=()=>Pi(Ci(t)),t.nonoptional=r=>gm(t,r),t.array=()=>tm(t),t.or=r=>sm([t,r]),t.and=r=>om(t,r),t.transform=r=>ji(t,lm(r)),t.default=r=>dm(t,r),t.prefault=r=>pm(t,r),t.catch=r=>vm(t,r),t.pipe=r=>ji(t,r),t.readonly=()=>wm(t),t.describe=r=>{const n=t.clone();return lr.add(n,{description:r}),n},Object.defineProperty(t,"description",{get(){return lr.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return lr.get(t);const n=t.clone();return lr.add(n,r[0]),n},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Va=w("_ZodString",(t,e)=>{cs.init(t,e),H.init(t,e);const r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...n)=>t.check(Qp(...n)),t.includes=(...n)=>t.check(eg(...n)),t.startsWith=(...n)=>t.check(tg(...n)),t.endsWith=(...n)=>t.check(rg(...n)),t.min=(...n)=>t.check(Pr(...n)),t.max=(...n)=>t.check(Ba(...n)),t.length=(...n)=>t.check(qa(...n)),t.nonempty=(...n)=>t.check(Pr(1,...n)),t.lowercase=n=>t.check(Yp(n)),t.uppercase=n=>t.check(Xp(n)),t.trim=()=>t.check(sg()),t.normalize=(...n)=>t.check(ng(...n)),t.toLowerCase=()=>t.check(ig()),t.toUpperCase=()=>t.check(og()),t.slugify=()=>t.check(ag())}),$g=w("ZodString",(t,e)=>{cs.init(t,e),Va.init(t,e),t.email=r=>t.check(Sp(Ig,r)),t.url=r=>t.check(Rp(Dg,r)),t.jwt=r=>t.check(Vp(Jg,r)),t.emoji=r=>t.check(Pp(Ug,r)),t.guid=r=>t.check(Ti(xi,r)),t.uuid=r=>t.check(Op(ur,r)),t.uuidv4=r=>t.check(Ap(ur,r)),t.uuidv6=r=>t.check(Tp(ur,r)),t.uuidv7=r=>t.check(xp(ur,r)),t.nanoid=r=>t.check(Cp(zg,r)),t.guid=r=>t.check(Ti(xi,r)),t.cuid=r=>t.check(jp(Ng,r)),t.cuid2=r=>t.check($p(Lg,r)),t.ulid=r=>t.check(Ip(Fg,r)),t.base64=r=>t.check(Mp(Kg,r)),t.base64url=r=>t.check(Bp(Hg,r)),t.xid=r=>t.check(Dp(Mg,r)),t.ksuid=r=>t.check(Up(Bg,r)),t.ipv4=r=>t.check(zp(qg,r)),t.ipv6=r=>t.check(Np(Vg,r)),t.cidrv4=r=>t.check(Lp(Zg,r)),t.cidrv6=r=>t.check(Fp(Wg,r)),t.e164=r=>t.check(qp(Gg,r)),t.datetime=r=>t.check(fg(r)),t.date=r=>t.check(gg(r)),t.time=r=>t.check(vg(r)),t.duration=r=>t.check(bg(r))});function sy(t){return Ep($g,t)}const L=w("ZodStringFormat",(t,e)=>{N.init(t,e),Va.init(t,e)}),Ig=w("ZodEmail",(t,e)=>{If.init(t,e),L.init(t,e)}),xi=w("ZodGUID",(t,e)=>{jf.init(t,e),L.init(t,e)}),ur=w("ZodUUID",(t,e)=>{$f.init(t,e),L.init(t,e)}),Dg=w("ZodURL",(t,e)=>{Df.init(t,e),L.init(t,e)}),Ug=w("ZodEmoji",(t,e)=>{Uf.init(t,e),L.init(t,e)}),zg=w("ZodNanoID",(t,e)=>{zf.init(t,e),L.init(t,e)}),Ng=w("ZodCUID",(t,e)=>{Nf.init(t,e),L.init(t,e)}),Lg=w("ZodCUID2",(t,e)=>{Lf.init(t,e),L.init(t,e)}),Fg=w("ZodULID",(t,e)=>{Ff.init(t,e),L.init(t,e)}),Mg=w("ZodXID",(t,e)=>{Mf.init(t,e),L.init(t,e)}),Bg=w("ZodKSUID",(t,e)=>{Bf.init(t,e),L.init(t,e)}),qg=w("ZodIPv4",(t,e)=>{Kf.init(t,e),L.init(t,e)}),Vg=w("ZodIPv6",(t,e)=>{Hf.init(t,e),L.init(t,e)}),Zg=w("ZodCIDRv4",(t,e)=>{Gf.init(t,e),L.init(t,e)}),Wg=w("ZodCIDRv6",(t,e)=>{Jf.init(t,e),L.init(t,e)}),Kg=w("ZodBase64",(t,e)=>{Qf.init(t,e),L.init(t,e)}),Hg=w("ZodBase64URL",(t,e)=>{Xf.init(t,e),L.init(t,e)}),Gg=w("ZodE164",(t,e)=>{ep.init(t,e),L.init(t,e)}),Jg=w("ZodJWT",(t,e)=>{rp.init(t,e),L.init(t,e)}),Qg=w("ZodUnknown",(t,e)=>{np.init(t,e),H.init(t,e)});function Ri(){return Gp(Qg)}const Yg=w("ZodNever",(t,e)=>{sp.init(t,e),H.init(t,e)});function Xg(t){return Jp(Yg,t)}const em=w("ZodArray",(t,e)=>{ip.init(t,e),H.init(t,e),t.element=e.element,t.min=(r,n)=>t.check(Pr(r,n)),t.nonempty=r=>t.check(Pr(1,r)),t.max=(r,n)=>t.check(Ba(r,n)),t.length=(r,n)=>t.check(qa(r,n)),t.unwrap=()=>t.element});function tm(t,e){return cg(em,t,e)}const rm=w("ZodObject",(t,e)=>{ap.init(t,e),H.init(t,e),U(t,"shape",()=>e.shape),t.keyof=()=>am(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Ri()}),t.loose=()=>t.clone({...t._zod.def,catchall:Ri()}),t.strict=()=>t.clone({...t._zod.def,catchall:Xg()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>$d(t,r),t.safeExtend=r=>Id(t,r),t.merge=r=>Dd(t,r),t.pick=r=>Cd(t,r),t.omit=r=>jd(t,r),t.partial=(...r)=>Ud(Za,t,r[0]),t.required=(...r)=>zd(Wa,t,r[0])});function iy(t,e){const r={type:"object",shape:t??{},...C(e)};return new rm(r)}const nm=w("ZodUnion",(t,e)=>{cp.init(t,e),H.init(t,e),t.options=e.options});function sm(t,e){return new nm({type:"union",options:t,...C(e)})}const im=w("ZodIntersection",(t,e)=>{lp.init(t,e),H.init(t,e)});function om(t,e){return new im({type:"intersection",left:t,right:e})}const zn=w("ZodEnum",(t,e)=>{up.init(t,e),H.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const r=new Set(Object.keys(e.entries));t.extract=(n,s)=>{const i={};for(const o of n)if(r.has(o))i[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new zn({...e,checks:[],...C(s),entries:i})},t.exclude=(n,s)=>{const i={...e.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new zn({...e,checks:[],...C(s),entries:i})}});function am(t,e){const r=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new zn({type:"enum",entries:r,...C(e)})}const cm=w("ZodTransform",(t,e)=>{hp.init(t,e),H.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new xa(t.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(Ut(i,r.value,e));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=t),r.issues.push(Ut(o))}};const s=e.transform(r.value,r);return s instanceof Promise?s.then(i=>(r.value=i,r)):(r.value=s,r)}});function lm(t){return new cm({type:"transform",transform:t})}const Za=w("ZodOptional",(t,e)=>{dp.init(t,e),H.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Pi(t){return new Za({type:"optional",innerType:t})}const um=w("ZodNullable",(t,e)=>{fp.init(t,e),H.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Ci(t){return new um({type:"nullable",innerType:t})}const hm=w("ZodDefault",(t,e)=>{pp.init(t,e),H.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function dm(t,e){return new hm({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():Ca(e)}})}const fm=w("ZodPrefault",(t,e)=>{gp.init(t,e),H.init(t,e),t.unwrap=()=>t._zod.def.innerType});function pm(t,e){return new fm({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():Ca(e)}})}const Wa=w("ZodNonOptional",(t,e)=>{mp.init(t,e),H.init(t,e),t.unwrap=()=>t._zod.def.innerType});function gm(t,e){return new Wa({type:"nonoptional",innerType:t,...C(e)})}const mm=w("ZodCatch",(t,e)=>{vp.init(t,e),H.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function vm(t,e){return new mm({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const ym=w("ZodPipe",(t,e)=>{yp.init(t,e),H.init(t,e),t.in=e.in,t.out=e.out});function ji(t,e){return new ym({type:"pipe",in:t,out:e})}const bm=w("ZodReadonly",(t,e)=>{bp.init(t,e),H.init(t,e),t.unwrap=()=>t._zod.def.innerType});function wm(t){return new bm({type:"readonly",innerType:t})}const _m=w("ZodCustom",(t,e)=>{wp.init(t,e),H.init(t,e)});function km(t,e={}){return lg(_m,t,e)}function Em(t){return ug(t)}export{zm as Q,Qe as _,Um as a,jm as b,Tm as c,Im as d,xm as e,Cm as f,Ga as g,$m as h,Yv as i,pt as j,ey as k,Dm as l,_o as m,Xv as n,Rm as o,ty as p,ry as q,ny as r,Pm as s,Am as t,Qv as u,Ja as v,Om as w,gv as x,iy as y,sy as z};
